{"version":3,"sources":["../../onboard/node_modules/@ledgerhq/hw-transport-u2f/node_modules/@ledgerhq/errors/dist/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/events/events.js","../../onboard/node_modules/@ledgerhq/hw-transport-u2f/lib-es/TransportU2F.js","../../onboard/node_modules/u2f-api/index.js","../../onboard/node_modules/u2f-api/lib/u2f-api.js","../../onboard/node_modules/u2f-api/lib/google-u2f-api.js","../../onboard/node_modules/@ledgerhq/hw-transport-u2f/node_modules/@ledgerhq/hw-transport/lib-es/Transport.js","../../onboard/node_modules/@ledgerhq/hw-transport-u2f/node_modules/@ledgerhq/logs/lib-es/index.js"],"names":["errorClasses","deserializers","addCustomErrorDeserializer","name","deserializer","createCustomErrorClass","C","message","fields","Object","assign","this","stack","Error","prototype","TransportRaceCondition","TransportError","id","e","StatusCodes","PIN_REMAINING_ATTEMPTS","INCORRECT_LENGTH","MISSING_CRITICAL_PARAMETER","COMMAND_INCOMPATIBLE_FILE_STRUCTURE","SECURITY_STATUS_NOT_SATISFIED","CONDITIONS_OF_USE_NOT_SATISFIED","INCORRECT_DATA","NOT_ENOUGH_MEMORY_SPACE","REFERENCED_DATA_NOT_FOUND","FILE_ALREADY_EXISTS","INCORRECT_P1_P2","INS_NOT_SUPPORTED","CLA_NOT_SUPPORTED","TECHNICAL_PROBLEM","OK","MEMORY_PROBLEM","NO_EF_SELECTED","INVALID_OFFSET","FILE_NOT_FOUND","INCONSISTENT_FILE","ALGORITHM_NOT_SUPPORTED","INVALID_KCV","CODE_NOT_INITIALIZED","ACCESS_CONDITION_NOT_FULFILLED","CONTRADICTION_SECRET_CODE_STATUS","CONTRADICTION_INVALIDATION","CODE_BLOCKED","MAX_VALUE_REACHED","GP_AUTH_FAILED","LICENSING","HALTED","TransportStatusError","statusCode","statusText","keys","find","k","smsg","code","getAltStatusMessage","statusCodeStr","toString","_createForOfIteratorHelper","o","Symbol","iterator","Array","isArray","i","F","s","n","length","done","value","_e","f","TypeError","it","err","normalCompletion","didErr","step","next","_e2","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","call","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","module","exports","once","emitter","Promise","resolve","reject","errorListener","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","warned","w","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","rawListeners","eventNames","wrapU2FTransportError","originalError","webSafe64","base64","replace","attemptExchange","apdu","timeoutMillis","scrambleKey","keyHandle","result","Buffer","alloc","wrapApdu","challenge","from","signRequest","version","appId","location","origin","then","response","signatureData","data","substring","transportInstances","TransportU2F","_Transport","_super","_this","_open","mark","_callee","_","_args","wrap","_context","prev","abrupt","stop","_x","_exchange","_callee2","_context2","exchangeTimeout","sent","t0","metaData","forEach","t","_x2","isSupported","supported","listen","observer","unsubscribed","descriptor","complete","unsubscribe","API","chromeApi","isBrowser","navigator","userAgent","isSafari","match","isEDGE","_backend","getBackend","notSupported","u2f","native","window","sign","protocol","MessageChannel","ok","ensureSupport","register","ErrorCodes","ErrorNames","makeError","msg","errorCode","deferPromise","promise","cancel","disconnect","backend","_ensureSupport","registerRequests","signRequests","timeout","makeDefault","func","global","CANCELLED","OTHER_ERROR","BAD_REQUEST","CONFIGURATION_UNSUPPORTED","DEVICE_INELIGIBLE","TIMEOUT","EXTENSION_ID","MessageTypes","Request","Response","SignRequest","SignResponse","RegisterRequest","RegisterResponse","port_","getMessagePort","callback","chrome","runtime","U2F_SIGN_REQUEST","sendMessage","lastError","getIframePort_","getChromeRuntimePort_","port","connect","setTimeout","WrappedChromeRuntimePort_","postMessage","eventName","toLowerCase","onMessage","iframeOrigin","iframe","document","createElement","src","setAttribute","body","appendChild","hasCalledBack","channel","port1","ready","start","contentWindow","port2","EXTENSION_TIMEOUT_SEC","waitingForPort_","reqCounter_","callbackMap_","getPortSingleton_","responseHandler_","reqId","cb","opt_timeoutSeconds","req","timeoutSeconds","requestId","U2F_REGISTER_REQUEST","Transport","unresponsiveTimeout","deviceModel","send","_ref","cla","ins","p1","p2","statusList","sw","exchange","readUInt16BE","some","_x3","_x4","exchangeBusyPromise","exchangeAtomicImpl","_ref2","resolveBusy","busyPromise","unresponsiveReached","res","r","clearTimeout","finish","_x5","_appAPIlock","_apdu","_key","event","_this$_events","_len","_key2","self","methods","_step","_iterator","methodName","decorateAppAPIMethod","ctx","_this2","_callee3","_len2","_key3","_args3","_context3","setScrambleKey","_this3","openTimeout","listenTimeout","found","sub","listenTimeoutId","open","ErrorMessage_NoDeviceFound","ErrorMessage_ListenTimeout","subscribers","log","obj","date","Date","dispatch","__ledgerLogsListen","indexOf"],"mappings":"0IAAA,wIAOA,IAAIA,EAAe,GACfC,EAAgB,GAEhBC,EAA6B,SAAoCC,EAAMC,GACzEH,EAAcE,GAAQC,GAGpBC,EAAyB,SAAgCF,GAC3D,IAAIG,EAAI,SAAqBC,EAASC,GACpCC,OAAOC,OAAOC,KAAMH,GACpBG,KAAKR,KAAOA,EACZQ,KAAKJ,QAAUA,GAAWJ,EAC1BQ,KAAKC,OAAQ,IAAIC,OAAQD,OAK3B,OAFAN,EAAEQ,UAAY,IAAID,MAClBb,EAAaG,GAAQG,EACdA,GAiHsBD,EAAuB,uBAC5BA,EAAuB,uBAC5BA,EAAuB,kBACpBA,EAAuB,qBACzBA,EAAuB,mBACxBA,EAAuB,kBACjBA,EAAuB,wBACvBA,EAAuB,wBAChBA,EAAuB,+BACrBA,EAAuB,iCAC/BA,EAAuB,oBACnBA,EAAuB,6BACrBA,EAAuB,+BAC/BA,EAAuB,uBAC9BA,EAAuB,gBAClBA,EAAuB,qBACxBA,EAAuB,oBACfA,EAAuB,4BAC7BA,EAAuB,sBACRA,EAAuB,qCACtCA,EAAuB,iBACXA,EAAuB,kCAClCA,EAAuB,uBACrBA,EAAuB,yBAC/BA,EAAuB,iBACvBA,EAAuB,iBACtBA,EAAuB,kBACOA,EAAuB,gDAC5CA,EAAuB,2BACpCA,EAAuB,cACnBA,EAAuB,kBACZA,EAAuB,6BAC3BA,EAAuB,yBACbA,EAAuB,8BAC9BA,EAAuB,uBACnBA,EAAuB,gCACrBA,EAAuB,kCAC7BA,EAAuB,uBACbA,EAAuB,iCAC/BA,EAAuB,yBAC3BA,EAAuB,0BAClCA,EAAuB,eAClBA,EAAuB,oBACvBA,EAAuB,oBACbA,EAAuB,8BAClBA,EAAuB,mCAC7BA,EAAuB,6BACJA,EAAuB,gDACnDA,EAAuB,oBAC3BA,EAAuB,gBACVA,EAAuB,6BAC7BA,EAAuB,uBACnBA,EAAuB,sBACxBA,EAAuB,qBAClBA,EAAuB,+BAC7BA,EAAuB,yBAC/BA,EAAuB,iBAChBA,EAAuB,wBACnBA,EAAuB,4BAC9BA,EAAuB,qBACAA,EAAuB,4CAC1BA,EAAuB,yCACzCA,EAAuB,uBACvBA,EAAuB,uBACxBA,EAAuB,sBAC5BA,EAAuB,iBACTA,EAAuB,+BAChCA,EAAuB,sBAChBA,EAAuB,6BACzBA,EAAuB,2BAC3BA,EAAuB,uBAEhBA,EAAuB,8BACnBA,EAAuB,kCAzE5D,IA0EIU,EAAyBV,EAAuB,0BACfA,EAAuB,kCAChCA,EAAuB,yBACpBA,EAAuB,4BACtBA,EAAuB,6BAC3BA,EAAuB,yBACzBA,EAAuB,uBAC1BA,EAAuB,oBACzBA,EAAuB,kBACzBA,EAAuB,gBACxBA,EAAuB,eACxBA,EAAuB,cACxBA,EAAuB,aACnBA,EAAuB,iBAClBA,EAAuB,sBAC7BA,EAAuB,gBACvBA,EAAuB,gBACRA,EAAuB,+BAErCA,EAAuB,iBACrBA,EAAuB,mBAC5BA,EAAuB,cAMxC,SAASW,EAAeT,EAASU,GAC/BN,KAAKR,KAAO,iBACZQ,KAAKJ,QAAUA,EACfI,KAAKC,OAAQ,IAAIC,OAAQD,MACzBD,KAAKM,GAAKA,EAGZD,EAAeF,UAAY,IAAID,MAC/BX,EAA2B,kBAAkB,SAAUgB,GACrD,OAAO,IAAIF,EAAeE,EAAEX,QAASW,EAAED,OAEzC,IAAIE,EAAc,CAChBC,uBAAwB,MACxBC,iBAAkB,MAClBC,2BAA4B,MAC5BC,oCAAqC,MACrCC,8BAA+B,MAC/BC,gCAAiC,MACjCC,eAAgB,MAChBC,wBAAyB,MACzBC,0BAA2B,MAC3BC,oBAAqB,MACrBC,gBAAiB,MACjBC,kBAAmB,MACnBC,kBAAmB,MACnBC,kBAAmB,MACnBC,GAAI,MACJC,eAAgB,MAChBC,eAAgB,MAChBC,eAAgB,MAChBC,eAAgB,MAChBC,kBAAmB,MACnBC,wBAAyB,MACzBC,YAAa,MACbC,qBAAsB,MACtBC,+BAAgC,MAChCC,iCAAkC,MAClCC,2BAA4B,MAC5BC,aAAc,MACdC,kBAAmB,MACnBC,eAAgB,MAChBC,UAAW,MACXC,OAAQ,OAmCV,SAASC,EAAqBC,GAC5BzC,KAAKR,KAAO,uBACZ,IAAIkD,EAAa5C,OAAO6C,KAAKnC,GAAaoC,MAAK,SAAUC,GACvD,OAAOrC,EAAYqC,KAAOJ,MACtB,gBACFK,EArCN,SAA6BC,GAC3B,OAAQA,GAEN,KAAK,MACH,MAAO,mBAET,KAAK,MACH,MAAO,6BAET,KAAK,MACH,MAAO,uEAET,KAAK,MACH,MAAO,uDAET,KAAK,MACH,MAAO,wBAET,KAAK,MACH,MAAO,6BAGX,GAAI,OAAUA,GAAQA,GAAQ,MAC5B,MAAO,gCAcEC,CAAoBP,IAAeC,EAC1CO,EAAgBR,EAAWS,SAAS,IACxClD,KAAKJ,QAAU,kBAAoBkD,EAAO,OAASG,EAAgB,IACnEjD,KAAKC,OAAQ,IAAIC,OAAQD,MACzBD,KAAKyC,WAAaA,EAClBzC,KAAK0C,WAAaA,EAGpBF,EAAqBrC,UAAY,IAAID,MACrCX,EAA2B,wBAAwB,SAAUgB,GAC3D,OAAO,IAAIiC,EAAqBjC,EAAEkC,gB,kCC1UpC,8CACe,SAASU,EAA2BC,GACjD,GAAsB,qBAAXC,QAAgD,MAAtBD,EAAEC,OAAOC,UAAmB,CAC/D,GAAIC,MAAMC,QAAQJ,KAAOA,EAAI,YAA2BA,IAAK,CAC3D,IAAIK,EAAI,EAEJC,EAAI,aAER,MAAO,CACLC,EAAGD,EACHE,EAAG,WACD,OAAIH,GAAKL,EAAES,OAAe,CACxBC,MAAM,GAED,CACLA,MAAM,EACNC,MAAOX,EAAEK,OAGblD,EAAG,SAAWyD,GACZ,MAAMA,GAERC,EAAGP,GAIP,MAAM,IAAIQ,UAAU,yIAGtB,IAAIC,EAGAC,EAFAC,GAAmB,EACnBC,GAAS,EAEb,MAAO,CACLX,EAAG,WACDQ,EAAKf,EAAEC,OAAOC,aAEhBM,EAAG,WACD,IAAIW,EAAOJ,EAAGK,OAEd,OADAH,EAAmBE,EAAKT,KACjBS,GAEThE,EAAG,SAAWkE,GACZH,GAAS,EACTF,EAAMK,GAERR,EAAG,WACD,IACOI,GAAoC,MAAhBF,EAAW,QAAWA,EAAW,SAC1D,QACA,GAAIG,EAAQ,MAAMF,O,iCC5B1B,IAIIM,EAJAC,EAAuB,kBAAZC,QAAuBA,QAAU,KAC5CC,EAAeF,GAAwB,oBAAZA,EAAEG,MAAuBH,EAAEG,MAAQ,SAAsBC,EAAQC,EAAUC,GACxG,OAAOC,SAAS/E,UAAU2E,MAAMK,KAAKJ,EAAQC,EAAUC,IAKvDP,EADEC,GAA0B,oBAAdA,EAAES,QACCT,EAAES,QACVtF,OAAOuF,sBACC,SAAwBN,GACvC,OAAOjF,OAAOwF,oBAAoBP,GAAQQ,OAAOzF,OAAOuF,sBAAsBN,KAG/D,SAAwBA,GACvC,OAAOjF,OAAOwF,oBAAoBP,IAQtC,IAAIS,EAAcC,OAAOC,OAAS,SAAqB3B,GACrD,OAAOA,IAAUA,GAGnB,SAAS4B,IACPA,EAAaC,KAAKT,KAAKnF,MAGzB6F,EAAOC,QAAUH,EACjBE,EAAOC,QAAQC,KA4Wf,SAAcC,EAASxG,GACrB,OAAO,IAAIyG,SAAQ,SAAUC,EAASC,GACpC,SAASC,EAAchC,GACrB4B,EAAQK,eAAe7G,EAAM8G,GAC7BH,EAAO/B,GAGT,SAASkC,IAC+B,oBAA3BN,EAAQK,gBACjBL,EAAQK,eAAe,QAASD,GAGlCF,EAAQ,GAAGK,MAAMpB,KAAKqB,YAIxBC,EAA+BT,EAASxG,EAAM8G,EAAU,CACtDP,MAAM,IAGK,UAATvG,GAQR,SAAuCwG,EAASU,EAASC,GAC7B,oBAAfX,EAAQY,IACjBH,EAA+BT,EAAS,QAASU,EAASC,GATxDE,CAA8Bb,EAASI,EAAe,CACpDL,MAAM,QAhYdJ,EAAaA,aAAeA,EAC5BA,EAAaxF,UAAU2G,aAAUC,EACjCpB,EAAaxF,UAAU6G,aAAe,EACtCrB,EAAaxF,UAAU8G,mBAAgBF,EAGvC,IAAIG,EAAsB,GAE1B,SAASC,EAAcC,GACrB,GAAwB,oBAAbA,EACT,MAAM,IAAIlD,UAAU,0EAA4EkD,GAsCpG,SAASC,EAAiBC,GACxB,YAA2BP,IAAvBO,EAAKL,cAAoCtB,EAAauB,oBACnDI,EAAKL,cAmDd,SAASM,EAAaxC,EAAQyC,EAAMJ,EAAUK,GAC5C,IAAIC,EACAC,EACAC,EAvHsBC,EA2I1B,GAnBAV,EAAcC,QAGCL,KAFfY,EAAS5C,EAAO+B,UAGda,EAAS5C,EAAO+B,QAAUhH,OAAOgI,OAAO,MACxC/C,EAAOiC,aAAe,SAIKD,IAAvBY,EAAOI,cACThD,EAAOiD,KAAK,cAAeR,EAAMJ,EAASA,SAAWA,EAASA,SAAWA,GAGzEO,EAAS5C,EAAO+B,SAGlBc,EAAWD,EAAOH,SAGHT,IAAba,EAEFA,EAAWD,EAAOH,GAAQJ,IACxBrC,EAAOiC,kBAcT,GAZwB,oBAAbY,EAETA,EAAWD,EAAOH,GAAQC,EAAU,CAACL,EAAUQ,GAAY,CAACA,EAAUR,GAC7DK,EACTG,EAASK,QAAQb,GAEjBQ,EAASM,KAAKd,IAIhBM,EAAIL,EAAiBtC,IAEb,GAAK6C,EAAS/D,OAAS6D,IAAME,EAASO,OAAQ,CACpDP,EAASO,QAAS,EAGlB,IAAIC,EAAI,IAAIlI,MAAM,+CAAiD0H,EAAS/D,OAAS,IAAMwE,OAAOb,GAAhF,qEAClBY,EAAE5I,KAAO,8BACT4I,EAAEpC,QAAUjB,EACZqD,EAAEZ,KAAOA,EACTY,EAAEE,MAAQV,EAAS/D,OApKGgE,EAqKHO,EApKnBG,SAAWA,QAAQC,MAAMD,QAAQC,KAAKX,GAwK1C,OAAO9C,EAaT,SAAS0D,IACP,IAAKzI,KAAK0I,MAGR,OAFA1I,KAAK+E,OAAOsB,eAAerG,KAAKwH,KAAMxH,KAAK2I,QAC3C3I,KAAK0I,OAAQ,EACY,IAArBlC,UAAU3C,OAAqB7D,KAAKoH,SAASjC,KAAKnF,KAAK+E,QACpD/E,KAAKoH,SAAStC,MAAM9E,KAAK+E,OAAQyB,WAI5C,SAASoC,EAAU7D,EAAQyC,EAAMJ,GAC/B,IAAIyB,EAAQ,CACVH,OAAO,EACPC,YAAQ5B,EACRhC,OAAQA,EACRyC,KAAMA,EACNJ,SAAUA,GAER0B,EAAUL,EAAYM,KAAKF,GAG/B,OAFAC,EAAQ1B,SAAWA,EACnByB,EAAMF,OAASG,EACRA,EAoGT,SAASE,EAAWjE,EAAQyC,EAAMyB,GAChC,IAAItB,EAAS5C,EAAO+B,QACpB,QAAeC,IAAXY,EAAsB,MAAO,GACjC,IAAIuB,EAAavB,EAAOH,GACxB,YAAmBT,IAAfmC,EAAiC,GACX,oBAAfA,EAAkCD,EAAS,CAACC,EAAW9B,UAAY8B,GAAc,CAACA,GACtFD,EA2DT,SAAyBE,GAGvB,IAFA,IAAIC,EAAM,IAAI7F,MAAM4F,EAAItF,QAEfJ,EAAI,EAAGA,EAAI2F,EAAIvF,SAAUJ,EAChC2F,EAAI3F,GAAK0F,EAAI1F,GAAG2D,UAAY+B,EAAI1F,GAGlC,OAAO2F,EAlESC,CAAgBH,GAAcI,EAAWJ,EAAYA,EAAWrF,QAqBlF,SAAS0F,EAAc/B,GACrB,IAAIG,EAAS3H,KAAK8G,QAElB,QAAeC,IAAXY,EAAsB,CACxB,IAAIuB,EAAavB,EAAOH,GAExB,GAA0B,oBAAf0B,EACT,OAAO,EACF,QAAmBnC,IAAfmC,EACT,OAAOA,EAAWrF,OAItB,OAAO,EAOT,SAASyF,EAAWH,EAAKvF,GAGvB,IAFA,IAAI4F,EAAO,IAAIjG,MAAMK,GAEZH,EAAI,EAAGA,EAAIG,IAAKH,EACvB+F,EAAK/F,GAAK0F,EAAI1F,GAGhB,OAAO+F,EAuDT,SAAS/C,EAA+BT,EAASxG,EAAM4H,EAAUT,GAC/D,GAA0B,oBAAfX,EAAQY,GACbD,EAAMZ,KACRC,EAAQD,KAAKvG,EAAM4H,GAEnBpB,EAAQY,GAAGpH,EAAM4H,OAEd,IAAwC,oBAA7BpB,EAAQyD,iBAaxB,MAAM,IAAIvF,UAAU,6EAA+E8B,GAVnGA,EAAQyD,iBAAiBjK,GAAM,SAASkK,EAAaC,GAG/ChD,EAAMZ,MACRC,EAAQ4D,oBAAoBpK,EAAMkK,GAGpCtC,EAASuC,OA/Yf7J,OAAO+J,eAAelE,EAAc,sBAAuB,CACzDmE,YAAY,EACZC,IAAK,WACH,OAAO7C,GAET8C,IAAK,SAAaL,GAChB,GAAmB,kBAARA,GAAoBA,EAAM,GAAKnE,EAAYmE,GACpD,MAAM,IAAIM,WAAW,kGAAoGN,EAAM,KAGjIzC,EAAsByC,KAI1BhE,EAAaC,KAAO,gBACGmB,IAAjB/G,KAAK8G,SAAyB9G,KAAK8G,UAAYhH,OAAOoK,eAAelK,MAAM8G,UAC7E9G,KAAK8G,QAAUhH,OAAOgI,OAAO,MAC7B9H,KAAKgH,aAAe,GAGtBhH,KAAKiH,cAAgBjH,KAAKiH,oBAAiBF,GAK7CpB,EAAaxF,UAAUgK,gBAAkB,SAAyBvG,GAChE,GAAiB,kBAANA,GAAkBA,EAAI,GAAK4B,EAAY5B,GAChD,MAAM,IAAIqG,WAAW,gFAAkFrG,EAAI,KAI7G,OADA5D,KAAKiH,cAAgBrD,EACd5D,MAQT2F,EAAaxF,UAAUiK,gBAAkB,WACvC,OAAO/C,EAAiBrH,OAG1B2F,EAAaxF,UAAU6H,KAAO,SAAcR,GAG1C,IAFA,IAAIvC,EAAO,GAEFxB,EAAI,EAAGA,EAAI+C,UAAU3C,OAAQJ,IACpCwB,EAAKiD,KAAK1B,UAAU/C,IAGtB,IAAI4G,EAAmB,UAAT7C,EACVG,EAAS3H,KAAK8G,QAClB,QAAeC,IAAXY,EAAsB0C,EAAUA,QAA4BtD,IAAjBY,EAAO2C,WAAyB,IAAKD,EAAS,OAAO,EAEpG,GAAIA,EAAS,CACX,IAAIE,EAGJ,GAFItF,EAAKpB,OAAS,IAAG0G,EAAKtF,EAAK,IAE3BsF,aAAcrK,MAGhB,MAAMqK,EAIR,IAAInG,EAAM,IAAIlE,MAAM,oBAAsBqK,EAAK,KAAOA,EAAG3K,QAAU,IAAM,KAEzE,MADAwE,EAAIoG,QAAUD,EACRnG,EAGR,IAAIsC,EAAUiB,EAAOH,GACrB,QAAgBT,IAAZL,EAAuB,OAAO,EAElC,GAAuB,oBAAZA,EACT7B,EAAa6B,EAAS1G,KAAMiF,OAE5B,KAAIwF,EAAM/D,EAAQ7C,OACd6G,EAAYpB,EAAW5C,EAAS+D,GAEpC,IAAShH,EAAI,EAAGA,EAAIgH,IAAOhH,EACzBoB,EAAa6F,EAAUjH,GAAIzD,KAAMiF,GAIrC,OAAO,GA2DTU,EAAaxF,UAAUwK,YAAc,SAAqBnD,EAAMJ,GAC9D,OAAOG,EAAavH,KAAMwH,EAAMJ,GAAU,IAG5CzB,EAAaxF,UAAUyG,GAAKjB,EAAaxF,UAAUwK,YAEnDhF,EAAaxF,UAAUyK,gBAAkB,SAAyBpD,EAAMJ,GACtE,OAAOG,EAAavH,KAAMwH,EAAMJ,GAAU,IA0B5CzB,EAAaxF,UAAU4F,KAAO,SAAcyB,EAAMJ,GAGhD,OAFAD,EAAcC,GACdpH,KAAK4G,GAAGY,EAAMoB,EAAU5I,KAAMwH,EAAMJ,IAC7BpH,MAGT2F,EAAaxF,UAAU0K,oBAAsB,SAA6BrD,EAAMJ,GAG9E,OAFAD,EAAcC,GACdpH,KAAK4K,gBAAgBpD,EAAMoB,EAAU5I,KAAMwH,EAAMJ,IAC1CpH,MAIT2F,EAAaxF,UAAUkG,eAAiB,SAAwBmB,EAAMJ,GACpE,IAAI0D,EAAMnD,EAAQoD,EAAUtH,EAAGuH,EAG/B,GAFA7D,EAAcC,QAECL,KADfY,EAAS3H,KAAK8G,SACY,OAAO9G,KAEjC,QAAa+G,KADb+D,EAAOnD,EAAOH,IACU,OAAOxH,KAE/B,GAAI8K,IAAS1D,GAAY0D,EAAK1D,WAAaA,EACb,MAAtBpH,KAAKgH,aAAoBhH,KAAK8G,QAAUhH,OAAOgI,OAAO,cACnDH,EAAOH,GACVG,EAAOtB,gBAAgBrG,KAAKgI,KAAK,iBAAkBR,EAAMsD,EAAK1D,UAAYA,SAE3E,GAAoB,oBAAT0D,EAAqB,CAGrC,IAFAC,GAAY,EAEPtH,EAAIqH,EAAKjH,OAAS,EAAGJ,GAAK,EAAGA,IAChC,GAAIqH,EAAKrH,KAAO2D,GAAY0D,EAAKrH,GAAG2D,WAAaA,EAAU,CACzD4D,EAAmBF,EAAKrH,GAAG2D,SAC3B2D,EAAWtH,EACX,MAIJ,GAAIsH,EAAW,EAAG,OAAO/K,KACR,IAAb+K,EAAgBD,EAAKG,QAoH7B,SAAmBH,EAAMI,GACvB,KAAOA,EAAQ,EAAIJ,EAAKjH,OAAQqH,IAC9BJ,EAAKI,GAASJ,EAAKI,EAAQ,GAG7BJ,EAAKK,MAxHDC,CAAUN,EAAMC,GAEE,IAAhBD,EAAKjH,SAAc8D,EAAOH,GAAQsD,EAAK,SACb/D,IAA1BY,EAAOtB,gBAA8BrG,KAAKgI,KAAK,iBAAkBR,EAAMwD,GAAoB5D,GAGjG,OAAOpH,MAGT2F,EAAaxF,UAAUkL,IAAM1F,EAAaxF,UAAUkG,eAEpDV,EAAaxF,UAAUmL,mBAAqB,SAA4B9D,GACtE,IAAIkD,EAAW/C,EAAQlE,EAEvB,QAAesD,KADfY,EAAS3H,KAAK8G,SACY,OAAO9G,KAEjC,QAA8B+G,IAA1BY,EAAOtB,eAQT,OAPyB,IAArBG,UAAU3C,QACZ7D,KAAK8G,QAAUhH,OAAOgI,OAAO,MAC7B9H,KAAKgH,aAAe,QACMD,IAAjBY,EAAOH,KACY,MAAtBxH,KAAKgH,aAAoBhH,KAAK8G,QAAUhH,OAAOgI,OAAO,aAAkBH,EAAOH,IAGhFxH,KAIT,GAAyB,IAArBwG,UAAU3C,OAAc,CAC1B,IACI0H,EADA5I,EAAO7C,OAAO6C,KAAKgF,GAGvB,IAAKlE,EAAI,EAAGA,EAAId,EAAKkB,SAAUJ,EAEjB,oBADZ8H,EAAM5I,EAAKc,KAEXzD,KAAKsL,mBAAmBC,GAM1B,OAHAvL,KAAKsL,mBAAmB,kBACxBtL,KAAK8G,QAAUhH,OAAOgI,OAAO,MAC7B9H,KAAKgH,aAAe,EACbhH,KAKT,GAAyB,oBAFzB0K,EAAY/C,EAAOH,IAGjBxH,KAAKqG,eAAemB,EAAMkD,QACrB,QAAkB3D,IAAd2D,EAET,IAAKjH,EAAIiH,EAAU7G,OAAS,EAAGJ,GAAK,EAAGA,IACrCzD,KAAKqG,eAAemB,EAAMkD,EAAUjH,IAIxC,OAAOzD,MAYT2F,EAAaxF,UAAUuK,UAAY,SAAmBlD,GACpD,OAAOwB,EAAWhJ,KAAMwH,GAAM,IAGhC7B,EAAaxF,UAAUqL,aAAe,SAAsBhE,GAC1D,OAAOwB,EAAWhJ,KAAMwH,GAAM,IAGhC7B,EAAa4D,cAAgB,SAAUvD,EAASwB,GAC9C,MAAqC,oBAA1BxB,EAAQuD,cACVvD,EAAQuD,cAAc/B,GAEtB+B,EAAcpE,KAAKa,EAASwB,IAIvC7B,EAAaxF,UAAUoJ,cAAgBA,EAkBvC5D,EAAaxF,UAAUsL,WAAa,WAClC,OAAOzL,KAAKgH,aAAe,EAAItC,EAAe1E,KAAK8G,SAAW,K,kCClYhE,kKAYA,SAAS4E,EAAsBC,EAAe/L,EAASU,GACrD,IAAI8D,EAAM,IAAI,IAAexE,EAASU,GAGtC,OADA8D,EAAIuH,cAAgBA,EACbvH,EAcT,IAAIwH,EAAY,SAAmBC,GACjC,OAAOA,EAAOC,QAAQ,MAAO,KAAKA,QAAQ,MAAO,KAAKA,QAAQ,MAAO,KAQvE,SAASC,EAAgBC,EAAMC,EAAeC,EAAajD,GACzD,IAAIkD,EArBN,SAAkBH,EAAMT,GAGtB,IAFA,IAAIa,EAASC,EAAOC,MAAMN,EAAKnI,QAEtBJ,EAAI,EAAGA,EAAIuI,EAAKnI,OAAQJ,IAC/B2I,EAAO3I,GAAKuI,EAAKvI,GAAK8H,EAAI9H,EAAI8H,EAAI1H,QAGpC,OAAOuI,EAcSG,CAASP,EAAME,GAC3BM,EAAYH,EAAOI,KAAK,mEAAoE,OAC5FC,EAAc,CAChBC,QAAS,SACTR,UAAWP,EAAUO,EAAUjJ,SAAS,WACxCsJ,UAAWZ,EAAUY,EAAUtJ,SAAS,WACxC0J,MAAOC,SAASC,QAGlB,OADA,YAAI,OAAQ,MAAQd,EAAK9I,SAAS,QAC3B,eAAKwJ,EAAaT,EAAgB,KAAMc,MAAK,SAAUC,GAC5D,IAf6BnB,EAezBoB,EAAgBD,EAASC,cAE7B,GAA6B,kBAAlBA,EAA4B,CACrC,IACIb,EADAc,EAAOb,EAAOI,MAlBSZ,EAkBKoB,GAjBtBnB,QAAQ,KAAM,KAAKA,QAAQ,KAAM,KAAO,KAAKqB,UAAU,EAAG,EAAItB,EAAOhI,OAAS,GAiBxC,UAUhD,OAJEuI,EAHGnD,EAGMiE,EAAK3G,MAAM,GAFX2G,EAKX,YAAI,OAAQ,MAAQd,EAAOlJ,SAAS,QAC7BkJ,EAEP,MAAMY,KAKZ,IAAII,EAAqB,GAqBzB,IAAIC,EAA4B,SAAUC,GACxC,YAAUD,EAAcC,GAExB,IAAIC,EAAS,YAAaF,GA0C1B,SAASA,IACP,IAAIG,EAQJ,OANA,YAAgBxN,KAAMqN,IAEtBG,EAAQD,EAAOpI,KAAKnF,OACdkM,iBAAc,EACpBsB,EAAMvE,QAAS,EACfmE,EAAmBlF,KAAK,YAAuBsF,IACxCA,EAmFT,OApIA,YAAaH,EAAc,KAAM,CAAC,CAChC9B,IAAK,OAWLxH,MAAO,WACL,IAAI0J,EAAQ,YAAgC,IAAoBC,MAAK,SAASC,EAAQC,GACpF,IACIC,EAAQrH,UAEZ,OAAO,IAAoBsH,MAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASvJ,MAC/B,KAAK,EAEH,OADeqJ,EAAMhK,OAAS,QAAkBkD,IAAb8G,EAAM,GAAmBA,EAAM,GAAK,IAChEE,EAASE,OAAO,SAAU,IAAIZ,GAEvC,KAAK,EACL,IAAK,MACH,OAAOU,EAASG,UAGrBP,OAOL,OAJA,SAAcQ,GACZ,OAAOV,EAAM3I,MAAM9E,KAAMwG,YArBtB,MA8CT,YAAa6G,EAAc,CAAC,CAC1B9B,IAAK,WACLxH,MAAO,WACL,IAAIqK,EAAY,YAAgC,IAAoBV,MAAK,SAASW,EAASrC,GAEzF,OAAO,IAAoB8B,MAAK,SAAmBQ,GACjD,OACE,OAAQA,EAAUN,KAAOM,EAAU9J,MACjC,KAAK,EAGH,OAFA8J,EAAUN,KAAO,EACjBM,EAAU9J,KAAO,EACVuH,EAAgBC,EAAMhM,KAAKuO,gBAAiBvO,KAAKkM,YAAalM,KAAKiJ,QAE5E,KAAK,EACH,OAAOqF,EAAUL,OAAO,SAAUK,EAAUE,MAE9C,KAAK,EAKH,GAJAF,EAAUN,KAAO,EACjBM,EAAUG,GAAKH,EAAiB,MAAE,KACY,kBAA1BA,EAAUG,GAAGC,UAEhB,CACfJ,EAAU9J,KAAO,GACjB,MAQF,MAzGoB,IAoGE8J,EAAUG,GApG9BC,SAAS3L,OAPzBqK,EAAmBuB,SAAQ,SAAUC,GACnC,OAAOA,EAAE5G,KAAK,iBAEhBoF,EAAqB,IA6GD1B,EAAsB4C,EAAUG,GAAI,0CAA4CH,EAAUG,GAAGC,SAASlH,KAAM,OAAS8G,EAAUG,GAAGC,SAAS3L,MAEnJ,KAAK,GACH,MAAMuL,EAAUG,GAElB,KAAK,GACL,IAAK,MACH,OAAOH,EAAUJ,UAGtBG,EAAUrO,KAAM,CAAC,CAAC,EAAG,SAO1B,OAJA,SAAkB6O,GAChB,OAAOT,EAAUtJ,MAAM9E,KAAMwG,YA3C1B,IAmDN,CACD+E,IAAK,iBACLxH,MAAO,SAAwBmI,GAC7BlM,KAAKkM,YAAcG,EAAOI,KAAKP,EAAa,WAK7C,CACDX,IAAK,YACLxH,MAAO,SAAmBkF,GACxBjJ,KAAKiJ,OAASA,IAEf,CACDsC,IAAK,QACLxH,MAAO,WAEL,OAAOkC,QAAQC,cAIZmH,EAzIuB,CA0I9B,KAGFA,EAAayB,YAAc,cAE3BzB,EAAavC,KAAO,WAClB,OACE,wBAAciC,MAAK,SAAUgC,GAC3B,OAAOA,EAAY,CAAC,MAAQ,OAKlC1B,EAAa2B,OAAS,SAAUC,GAC9B,IAAIC,GAAe,EAcnB,OAbA,wBAAcnC,MAAK,SAAUgC,GACvBG,IAEAH,GACFE,EAASzK,KAAK,CACZgD,KAAM,MACN2H,WAAY,OAEdF,EAASG,YAETH,EAAS3E,MAAM,IAAI,IAAe,mJAA8J,wBAG7L,CACL+E,YAAa,WACXH,GAAe,M,4DCjQrBrJ,EAAOC,QAAU,EAAQ,O,mCCFzB,YAEAD,EAAOC,QAAUwJ,EAEjB,IAAIC,EAAY,EAAQ,MAGpBC,EAAiC,qBAAdC,aAA+BA,UAAUC,UAC5DC,EAAWH,GAAaC,UAAUC,UAAUE,MAAM,cAAgBH,UAAUC,UAAUE,MAAM,YAC5FC,EAASL,GAAaC,UAAUC,UAAUE,MAAM,iBAChDE,EAAW,KAEf,SAASC,EAAW9J,GAmClB,OAlCK6J,IAAUA,EAAW,IAAI7J,GAAQ,SAAUC,EAASC,GACvD,SAAS6J,IAEP9J,EAAQ,CACN+J,IAAK,KACLC,QAAQ,IAIZ,OAAKV,EACDG,EAGKK,KACoC,qBAAfG,OAAOF,KAAkD,oBAApBE,OAAOF,IAAIG,MACxDlK,EAAQ,CAC5B+J,IAAKE,OAAOF,IACZC,QAAQ,IAENL,GAGsB,UAAtBhD,SAASwD,UAEiB,qBAAnBC,eAHFN,SAMTT,EAAUT,aAAY,SAAUyB,GAC1BA,EAAIrK,EAAQ,CACd+J,IAAKV,EACLW,QAAQ,IACFF,QAtBaA,QAyBlBF,EAGT,SAASR,EAAIrJ,GACX,MAAO,CACL6I,YAAaA,EAAY/F,KAAK9C,GAC9BuK,cAAeA,EAAczH,KAAK9C,GAClCwK,SAAUA,EAAS1H,KAAK9C,GACxBmK,KAAMA,EAAKrH,KAAK9C,GAChByK,WAAYpB,EAAIoB,WAChBC,WAAYrB,EAAIqB,YAuBpB,SAASC,EAAUC,EAAKzM,GACtB,IAAIrB,EAAc,MAAPqB,EAAcA,EAAI0M,UAAY,EAErCtJ,EAAO8H,EAAIqB,WAAW,GAAK5N,GAC3BuH,EAAQ,IAAIpK,MAAM2Q,GAKtB,OAJAvG,EAAMoE,SAAW,CACflH,KAAMA,EACNzE,KAAMA,GAEDuH,EAGT,SAASyG,EAAa9K,EAAS+K,GAC7B,IAAI5H,EAAM,GAqBV,OApBAA,EAAI4H,QAAU,IAAI/K,GAAQ,SAAUC,EAASC,GAC3CiD,EAAIlD,QAAUA,EACdkD,EAAIjD,OAASA,EACb6K,EAAQjE,KAAK7G,EAASC,MAQxBiD,EAAI4H,QAAQC,OAAS,SAAUJ,EAAKK,GAClCnB,EAAW9J,GAAS8G,MAAK,SAAUoE,GAC7BD,IAAeC,EAAQjB,QAAQiB,EAAQlB,IAAIiB,aAC/C9H,EAAIjD,OAAOyK,EAAUC,EAAK,CACxBC,WAAY,SAKX1H,EAaT,SAAS0F,IAEP,OAAOiB,EADO/P,MACa+M,MAAK,SAAUoE,GACxC,QAASA,EAAQlB,OAIrB,SAASmB,EAAeD,GACtB,IAAKA,EAAQlB,IAAK,CAChB,GAA0B,UAAtBpD,SAASwD,SAAsB,MAAM,IAAInQ,MAAM,6CACnD,MAAM,IAAIA,MAAM,sBAIpB,SAASsQ,IAEP,OAAOT,EADO/P,MACa+M,KAAKqE,GAGlC,SAASX,EAASY,EAAkBC,EAElCC,GACA,IAAItL,EAAUjG,KASd,OARKuD,MAAMC,QAAQ6N,KAAmBA,EAAmB,CAACA,IAE9B,kBAAjBC,GAAgD,qBAAZC,IAC7CA,EAAUD,EACVA,EAAe,MAGZA,IAAcA,EAAe,IAC3BP,EAAa9K,EAAS8J,EAAW9J,GAAS8G,MAAK,SAAUoE,GAC9DC,EAAeD,GAEf,IAAIjB,EAASiB,EAAQjB,OACjBD,EAAMkB,EAAQlB,IAClB,OAAO,IAAIhK,GAAQ,SAAUC,EAASC,GAYpC,GAAI+J,EAAQ,CACV,IAAItD,EAAQyE,EAAiB,GAAGzE,MAChCqD,EAAIQ,SAAS7D,EAAOyE,EAAkBC,GAbxC,SAAkBtE,GACZA,EAAS8D,UAAW3K,EAAOyK,EAAU,sBAAuB5D,YACvDA,EAAS8D,UAChB5K,EAAQ8G,MAUoDuE,QAE9DtB,EAAIQ,SAASY,EAAkBC,GARjC,SAAkBlN,EAAK4I,GACjB5I,EAAK+B,EAAO/B,GAAc4I,EAAS8D,UAAW3K,EAAOyK,EAAU,sBAAuB5D,IAAgB9G,EAAQ8G,KAO3DuE,UAGzDP,QAGN,SAASZ,EAAKkB,EAAcC,GAC1B,IAAItL,EAAUjG,KAEd,OADKuD,MAAMC,QAAQ8N,KAAeA,EAAe,CAACA,IAC3CP,EAAa9K,EAAS8J,EAAW9J,GAAS8G,MAAK,SAAUoE,GAC9DC,EAAeD,GAEf,IAAIjB,EAASiB,EAAQjB,OACjBD,EAAMkB,EAAQlB,IAClB,OAAO,IAAIhK,GAAQ,SAAUC,EAASC,GAYpC,GAAI+J,EAAQ,CACV,IAAItD,EAAQ0E,EAAa,GAAG1E,MACxBJ,EAAY8E,EAAa,GAAG9E,UAChCyD,EAAIG,KAAKxD,EAAOJ,EAAW8E,GAd7B,SAAkBtE,GACZA,EAAS8D,UAAW3K,EAAOyK,EAAU,cAAe5D,YAC/CA,EAAS8D,UAChB5K,EAAQ8G,MAWyCuE,QAEnDtB,EAAIG,KAAKkB,GATX,SAAkBlN,EAAK4I,GACjB5I,EAAK+B,EAAO/B,GAAc4I,EAAS8D,UAAW3K,EAAOyK,EAAU,cAAe5D,IAAgB9G,EAAQ8G,KAQzEuE,UAGnCP,QAGN,SAASQ,EAAYC,GACnBnC,EAAImC,GAAQ,WACV,IAAKC,EAAOzL,QAEV,MAAM,IAAI/F,MAAM,kDAClB,IAAI+E,EAAO,GAAGsB,MAAMpB,KAAKqB,WACzB,OAAO8I,EAAIoC,EAAOzL,SAASwL,GAAM3M,MAAM,KAAMG,IAjKjDqK,EAAIoB,WAAa,CACfiB,WAAY,EACZpQ,GAAI,EACJqQ,YAAa,EACbC,YAAa,EACbC,0BAA2B,EAC3BC,kBAAmB,EACnBC,QAAS,GAEX1C,EAAIqB,WAAa,CACf,KAAM,YACN,EAAK,KACL,EAAK,cACL,EAAK,cACL,EAAK,4BACL,EAAK,oBACL,EAAK,WAsJPa,EAAY,eACZA,EAAY,iBACZA,EAAY,YACZA,EAAY,U,oDCxNZ,IAAIvB,EAAMA,GAAO,GACjBpK,EAAOC,QAAUmK,EAQjBA,EAAIgC,aAAe,mCAOnBhC,EAAIiC,aAAe,CACjB,qBAAwB,uBACxB,iBAAoB,mBACpB,sBAAyB,wBACzB,kBAAqB,qBAQvBjC,EAAIS,WAAa,CACf,GAAM,EACN,YAAe,EACf,YAAe,EACf,0BAA6B,EAC7B,kBAAqB,EACrB,QAAW,GAabT,EAAIkC,QAUJlC,EAAImC,SASJnC,EAAI/P,MAWJ+P,EAAIoC,YAUJpC,EAAIqC,aAUJrC,EAAIsC,gBASJtC,EAAIuC,iBAMJvC,EAAIiB,WAAa,WACXjB,EAAIwC,OAASxC,EAAIwC,MAAMA,QACzBxC,EAAIwC,MAAMA,MAAMvB,aAChBjB,EAAIwC,MAAQ,OAUhBxC,EAAIyC,eAAiB,SAAUC,GAC7B,GAAqB,oBAAVC,QAAyBA,OAAOC,QAAS,CAIlD,IAAIhC,EAAM,CACRrJ,KAAMyI,EAAIiC,aAAaY,iBACvBxB,aAAc,IAEhBsB,OAAOC,QAAQE,YAAY9C,EAAIgC,aAAcpB,GAAK,WAC3C+B,OAAOC,QAAQG,UAOlB/C,EAAIgD,eAAeN,GAJnB1C,EAAIiD,sBAAsBP,WAU9B1C,EAAIgD,eAAeN,IAUvB1C,EAAIiD,sBAAwB,SAAUP,GACpC,IAAIQ,EAAOP,OAAOC,QAAQO,QAAQnD,EAAIgC,aAAc,CAClD,qBAAuB,IAEzBoB,YAAW,WACTV,EAAS,KAAM,IAAI1C,EAAIqD,0BAA0BH,MAChD,IAULlD,EAAIqD,0BAA4B,SAAUH,GACxCnT,KAAKyS,MAAQU,GAQflD,EAAIqD,0BAA0BnT,UAAUoT,YAAc,SAAU3T,GAC9DI,KAAKyS,MAAMc,YAAY3T,IAUzBqQ,EAAIqD,0BAA0BnT,UAAUsJ,iBAAmB,SAAU+J,EAAW9M,GAC9E,IAAIlH,EAAOgU,EAAUC,cAET,WAARjU,GAA6B,aAARA,EACvBQ,KAAKyS,MAAMiB,UAAU/I,aAAY,SAAU/K,GAEzC8G,EAAQ,CACN,KAAQ9G,OAIZ2I,QAAQ+B,MAAM,qDAUlB2F,EAAIgD,eAAiB,SAAUN,GAE7B,IAAIgB,EAAe,sBAAwB1D,EAAIgC,aAC3C2B,EAASC,SAASC,cAAc,UACpCF,EAAOG,IAAMJ,EAAe,kBAC5BC,EAAOI,aAAa,QAAS,gBAC7BH,SAASI,KAAKC,YAAYN,GAC1B,IAAIO,GAAgB,EAChBC,EAAU,IAAI9D,eAelB8D,EAAQC,MAAM5K,iBAAiB,WAbnB,SAAS6K,EAAM1U,GACL,SAAhBA,EAAQsN,MACVkH,EAAQC,MAAMzK,oBAAoB,UAAW0K,GAExCH,IACHA,GAAgB,EAChBxB,EAAS,KAAMyB,EAAQC,SAGzB9L,QAAQ+B,MAAM,iDAKlB8J,EAAQC,MAAME,QACdX,EAAOnK,iBAAiB,QAAQ,WAE9BmK,EAAOY,cAAcjB,YAAY,OAAQI,EAAc,CAACS,EAAQK,WAGlEpB,YAAW,WACJc,IACHA,GAAgB,EAChBxB,EAAS,IAAIzS,MAAM,sCAEpB,MASL+P,EAAIyE,sBAAwB,GAO5BzE,EAAIwC,MAAQ,KAOZxC,EAAI0E,gBAAkB,GAOtB1E,EAAI2E,YAAc,EAQlB3E,EAAI4E,aAAe,GAOnB5E,EAAI6E,kBAAoB,SAAUnC,GAC5B1C,EAAIwC,MACNE,EAAS,KAAM1C,EAAIwC,QAEe,GAA9BxC,EAAI0E,gBAAgB9Q,QACtBoM,EAAIyC,gBAAe,SAAUtO,EAAK+O,GAShC,IARK/O,IACH6L,EAAIwC,MAAQU,EACZlD,EAAIwC,MAAMhJ,iBAAiB,UAE3BwG,EAAI8E,mBAIC9E,EAAI0E,gBAAgB9Q,QACzBoM,EAAI0E,gBAAgB1J,OAApBgF,CAA4B7L,EAAK+O,MAKvClD,EAAI0E,gBAAgBzM,KAAKyK,KAU7B1C,EAAI8E,iBAAmB,SAAUnV,GAC/B,IAAIoN,EAAWpN,EAAQsN,KACnB8H,EAAQhI,EAAoB,UAEhC,GAAKgI,GAAU/E,EAAI4E,aAAaG,GAAhC,CAKA,IAAIC,EAAKhF,EAAI4E,aAAaG,UACnB/E,EAAI4E,aAAaG,GACxBC,EAAG,KAAMjI,EAAuB,mBAN9BzE,QAAQ+B,MAAM,8CAclB2F,EAAInB,YAAc,SAAU6D,GAC1B1C,EAAI6E,mBAAkB,SAAU1Q,EAAK+O,GACnCR,GAAUvO,OAWd6L,EAAIG,KAAO,SAAUkB,EAAcqB,EAAUuC,GAC3CjF,EAAI6E,mBAAkB,SAAU1Q,EAAK+O,GACnC,GAAI/O,EAAK,OAAOuO,EAASvO,GACzB,IAAI4Q,IAAU/E,EAAI2E,YAClB3E,EAAI4E,aAAaG,GAASrC,EAC1B,IAAIwC,EAAM,CACR3N,KAAMyI,EAAIiC,aAAaY,iBACvBxB,aAAcA,EACd8D,eAA8C,qBAAvBF,EAAqCA,EAAqBjF,EAAIyE,sBACrFW,UAAWL,GAEb7B,EAAKI,YAAY4B,OAarBlF,EAAIQ,SAAW,SAAUY,EAAkBC,EAAcqB,EAAUuC,GACjEjF,EAAI6E,mBAAkB,SAAU1Q,EAAK+O,GACnC,GAAI/O,EAAK,OAAOuO,EAASvO,GACzB,IAAI4Q,IAAU/E,EAAI2E,YAClB3E,EAAI4E,aAAaG,GAASrC,EAC1B,IAAIwC,EAAM,CACR3N,KAAMyI,EAAIiC,aAAaoD,qBACvBhE,aAAcA,EACdD,iBAAkBA,EAClB+D,eAA8C,qBAAvBF,EAAqCA,EAAqBjF,EAAIyE,sBACrFW,UAAWL,GAEb7B,EAAKI,YAAY4B,Q,mCCvZrB,8HAiBII,EAAyB,WAC3B,SAASA,IACP,IAAI/H,EAAQxN,KAEZ,YAAgBA,KAAMuV,GAEtBvV,KAAKuO,gBAAkB,IACvBvO,KAAKwV,oBAAsB,KAC3BxV,KAAKyV,YAAc,KACnBzV,KAAK8G,QAAU,IAAI,IAEnB9G,KAAK0V,KAAoB,WACvB,IAAIC,EAAO,YAAgC,IAAoBjI,MAAK,SAASC,EAAQiI,EAAKC,EAAKC,EAAIC,GACjG,IAAI7I,EACA8I,EACAhJ,EACAiJ,EACApI,EAAQrH,UACZ,OAAO,IAAoBsH,MAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASvJ,MAC/B,KAAK,EAIH,GAHA0I,EAAOW,EAAMhK,OAAS,QAAkBkD,IAAb8G,EAAM,GAAmBA,EAAM,GAAKxB,EAAOC,MAAM,GAC5E0J,EAAanI,EAAMhK,OAAS,QAAkBkD,IAAb8G,EAAM,GAAmBA,EAAM,GAAK,CAAC,IAAYtM,MAE5E2L,EAAKrJ,QAAU,KAAM,CACzBkK,EAASvJ,KAAO,EAChB,MAGF,MAAM,IAAI,IAAe,4CAA8C0I,EAAKrJ,OAAQ,oBAEtF,KAAK,EAEH,OADAkK,EAASvJ,KAAO,EACTgJ,EAAM0I,SAAS7J,EAAO9G,OAAO,CAAC8G,EAAOI,KAAK,CAACmJ,EAAKC,EAAKC,EAAIC,IAAM1J,EAAOI,KAAK,CAACS,EAAKrJ,SAAUqJ,KAEpG,KAAK,EAIH,GAHAF,EAAWe,EAASS,KACpByH,EAAKjJ,EAASmJ,aAAanJ,EAASnJ,OAAS,GAEzCmS,EAAWI,MAAK,SAAUzS,GAC5B,OAAOA,IAAMsS,KACX,CACFlI,EAASvJ,KAAO,GAChB,MAGF,MAAM,IAAI,IAAqByR,GAEjC,KAAK,GACH,OAAOlI,EAASE,OAAO,SAAUjB,GAEnC,KAAK,GACL,IAAK,MACH,OAAOe,EAASG,UAGrBP,OAGL,OAAO,SAAUQ,EAAIU,EAAKwH,EAAKC,GAC7B,OAAOX,EAAK7Q,MAAM9E,KAAMwG,YAlDH,GAsDzBxG,KAAKuW,yBAAsB,EAE3BvW,KAAKwW,mBAAkC,WACrC,IAAIC,EAAQ,YAAgC,IAAoB/I,MAAK,SAASW,EAASpK,GACrF,IAAIyS,EAAaC,EAAaC,EAAqBrF,EAASsF,EAC5D,OAAO,IAAoB/I,MAAK,SAAmBQ,GACjD,OACE,OAAQA,EAAUN,KAAOM,EAAU9J,MACjC,KAAK,EACH,IAAKgJ,EAAM+I,oBAAqB,CAC9BjI,EAAU9J,KAAO,EACjB,MAGF,MAAM,IAAI,IAAuB,iFAEnC,KAAK,EAaH,OAZAmS,EAAc,IAAI1Q,SAAQ,SAAU6Q,GAClCJ,EAAcI,KAEhBtJ,EAAM+I,oBAAsBI,EAC5BC,GAAsB,EACtBrF,EAAU8B,YAAW,WACnBuD,GAAsB,EAEtBpJ,EAAMxF,KAAK,kBACVwF,EAAMgI,qBACTlH,EAAUN,KAAO,EACjBM,EAAU9J,KAAO,EACVP,IAET,KAAK,EAOH,OANA4S,EAAMvI,EAAUE,KAEZoI,GACFpJ,EAAMxF,KAAK,cAGNsG,EAAUL,OAAO,SAAU4I,GAEpC,KAAK,GAKH,OAJAvI,EAAUN,KAAO,GACjB+I,aAAaxF,GACTmF,GAAaA,IACjBlJ,EAAM+I,oBAAsB,KACrBjI,EAAU0I,OAAO,IAE1B,KAAK,GACL,IAAK,MACH,OAAO1I,EAAUJ,UAGtBG,EAAU,KAAM,CAAC,CAAC,EAAE,CAAE,GAAI,UAG/B,OAAO,SAAU4I,GACf,OAAOR,EAAM3R,MAAM9E,KAAMwG,YAtDU,GA0DvCxG,KAAKkX,YAAc,KA8NrB,OAnNA,YAAa3B,EAAW,CAAC,CACvBhK,IAAK,WACLxH,MAAO,SAAkBoT,GACvB,MAAM,IAAIjX,MAAM,8BAQjB,CACDqL,IAAK,iBACLxH,MAAO,SAAwBqT,MAM9B,CACD7L,IAAK,QACLxH,MAAO,WACL,OAAOkC,QAAQC,YAQhB,CACDqF,IAAK,KACLxH,MAAO,SAAYyP,EAAWyB,GAC5BjV,KAAK8G,QAAQF,GAAG4M,EAAWyB,KAM5B,CACD1J,IAAK,MACLxH,MAAO,SAAayP,EAAWyB,GAC7BjV,KAAK8G,QAAQT,eAAemN,EAAWyB,KAExC,CACD1J,IAAK,OACLxH,MAAO,SAAcsT,GAGnB,IAFA,IAAIC,EAEKC,EAAO/Q,UAAU3C,OAAQoB,EAAO,IAAI1B,MAAMgU,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAMC,IACpGvS,EAAKuS,EAAQ,GAAKhR,UAAUgR,IAG7BF,EAAgBtX,KAAK8G,SAASkB,KAAKlD,MAAMwS,EAAe,CAACD,GAAO9R,OAAON,MAMzE,CACDsG,IAAK,eACLxH,MAAO,WACLwE,QAAQC,KAAK,kGAMd,CACD+C,IAAK,qBACLxH,MAAO,SAA4BwK,GACjCvO,KAAKuO,gBAAkBA,IAMxB,CACDhD,IAAK,iCACLxH,MAAO,SAAwCyR,GAC7CxV,KAAKwV,oBAAsBA,IAqB5B,CACDjK,IAAK,wBACLxH,MAAO,SAA+B0T,EAAMC,EAASxL,GACnD,IACIyL,EADAC,EAAY,YAA2BF,GAG3C,IACE,IAAKE,EAAUjU,MAAOgU,EAAQC,EAAUhU,KAAKE,MAAO,CAClD,IAAI+T,EAAaF,EAAM5T,MACvB0T,EAAKI,GAAc7X,KAAK8X,qBAAqBD,EAAYJ,EAAKI,GAAaJ,EAAMvL,IAEnF,MAAO9H,GACPwT,EAAUrX,EAAE6D,GACZ,QACAwT,EAAU3T,OAGb,CACDsH,IAAK,uBACLxH,MAAO,SAA8B8T,EAAY5T,EAAG8T,EAAK7L,GACvD,IAAI8L,EAAShY,KAEb,OAAoB,YAAgC,IAAoB0N,MAAK,SAASuK,IACpF,IAAIf,EACAgB,EACAjT,EACAkT,EACAC,EAAS5R,UAEb,OAAO,IAAoBsH,MAAK,SAAmBuK,GACjD,OACE,OAAQA,EAAUrK,KAAOqK,EAAU7T,MACjC,KAAK,EAGH,KAFA0S,EAAcc,EAAOd,aAEH,CAChBmB,EAAU7T,KAAO,EACjB,MAGF,OAAO6T,EAAUpK,OAAO,SAAUhI,QAAQE,OAAO,IAAI,IAAe,+BAAiC+Q,EAAc,IAAK,qBAE1H,KAAK,EAMH,IALAmB,EAAUrK,KAAO,EACjBgK,EAAOd,YAAcW,EAErBG,EAAOM,eAAepM,GAEjBgM,EAAQE,EAAOvU,OAAQoB,EAAO,IAAI1B,MAAM2U,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAC7ElT,EAAKkT,GAASC,EAAOD,GAIvB,OADAE,EAAU7T,KAAO,EACVP,EAAEa,MAAMiT,EAAK9S,GAEtB,KAAK,EACH,OAAOoT,EAAUpK,OAAO,SAAUoK,EAAU7J,MAE9C,KAAK,GAGH,OAFA6J,EAAUrK,KAAO,GACjBgK,EAAOd,YAAc,KACdmB,EAAUrB,OAAO,IAE1B,KAAK,GACL,IAAK,MACH,OAAOqB,EAAUnK,UAGtB+J,EAAU,KAAM,CAAC,CAAC,EAAE,CAAE,GAAI,aAG/B,CAAC,CACH1M,IAAK,SACLxH,MAAO,WACL,IAAIwU,EAASvY,KAETwY,EAAchS,UAAU3C,OAAS,QAAsBkD,IAAjBP,UAAU,GAAmBA,UAAU,GAAK,IAClFiS,EAAgBjS,UAAU3C,OAAS,EAAI2C,UAAU,QAAKO,EAC1D,OAAO,IAAId,SAAQ,SAAUC,EAASC,GACpC,IAAIuS,GAAQ,EAERC,EAAMJ,EAAOvJ,OAAO,CACtBxK,KAAM,SAAcjE,GAClBmY,GAAQ,EACJC,GAAKA,EAAItJ,cACTuJ,GAAiB7B,aAAa6B,GAElCL,EAAOM,KAAKtY,EAAE4O,WAAYqJ,GAAazL,KAAK7G,EAASC,IAEvDmE,MAAO,SAAe/J,GAChBqY,GAAiB7B,aAAa6B,GAClCzS,EAAO5F,IAET6O,SAAU,WACJwJ,GAAiB7B,aAAa6B,GAE7BF,GACHvS,EAAO,IAAI,IAAeoS,EAAOO,2BAA4B,qBAK/DF,EAAkBH,EAAgBpF,YAAW,WAC/CsF,EAAItJ,cACJlJ,EAAO,IAAI,IAAeoS,EAAOQ,2BAA4B,oBAC5DN,GAAiB,YAKnBlD,EA3VoB,GA+V7BA,EAAUzG,iBAAc,EACxByG,EAAUzK,UAAO,EACjByK,EAAUvG,YAAS,EACnBuG,EAAUsD,UAAO,EACjBtD,EAAUwD,2BAA6B,mCACvCxD,EAAUuD,2BAA6B,2B,4DCrXvC,kCAGA,IAAIxY,EAAK,EACL0Y,EAAc,GAOPC,EAAM,SAAazR,EAAM5H,EAASsN,GAC3C,IAAIgM,EAAM,CACR1R,KAAMA,EACNlH,GAAI+H,SAAS/H,GACb6Y,KAAM,IAAIC,MAERxZ,IAASsZ,EAAItZ,QAAUA,GACvBsN,IAAMgM,EAAIhM,KAAOA,GAsBvB,SAAkB+L,GAChB,IAAK,IAAIxV,EAAI,EAAGA,EAAIuV,EAAYnV,OAAQJ,IACtC,IACEuV,EAAYvV,GAAGwV,GACf,MAAO1Y,GACPgI,QAAQ+B,MAAM/J,IA1BlB8Y,CAASH,IAgCW,qBAAX/I,SACTA,OAAOmJ,mBAzBW,SAAgBrE,GAElC,OADA+D,EAAY9Q,KAAK+M,GACV,WACL,IAAIxR,EAAIuV,EAAYO,QAAQtE,IAEjB,IAAPxR,IAEFuV,EAAYvV,GAAKuV,EAAYA,EAAYnV,OAAS,GAClDmV,EAAY7N","file":"static/js/63.183fd0ab.chunk.js","sourcesContent":["/* eslint-disable no-continue */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable no-param-reassign */\n\n/* eslint-disable no-prototype-builtins */\nvar errorClasses = {};\nvar deserializers = {};\n\nvar addCustomErrorDeserializer = function addCustomErrorDeserializer(name, deserializer) {\n  deserializers[name] = deserializer;\n};\n\nvar createCustomErrorClass = function createCustomErrorClass(name) {\n  var C = function CustomError(message, fields) {\n    Object.assign(this, fields);\n    this.name = name;\n    this.message = message || name;\n    this.stack = new Error().stack;\n  };\n\n  C.prototype = new Error();\n  errorClasses[name] = C;\n  return C;\n}; // inspired from https://github.com/programble/errio/blob/master/index.js\n\n\nvar deserializeError = function deserializeError(object) {\n  if (typeof object === \"object\" && object) {\n    try {\n      // $FlowFixMe FIXME HACK\n      var msg = JSON.parse(object.message);\n\n      if (msg.message && msg.name) {\n        object = msg;\n      }\n    } catch (e) {// nothing\n    }\n\n    var error = void 0;\n\n    if (typeof object.name === \"string\") {\n      var name_1 = object.name;\n      var des = deserializers[name_1];\n\n      if (des) {\n        error = des(object);\n      } else {\n        var constructor = name_1 === \"Error\" ? Error : errorClasses[name_1];\n\n        if (!constructor) {\n          console.warn(\"deserializing an unknown class '\" + name_1 + \"'\");\n          constructor = createCustomErrorClass(name_1);\n        }\n\n        error = Object.create(constructor.prototype);\n\n        try {\n          for (var prop in object) {\n            if (object.hasOwnProperty(prop)) {\n              error[prop] = object[prop];\n            }\n          }\n        } catch (e) {// sometimes setting a property can fail (e.g. .name)\n        }\n      }\n    } else {\n      error = new Error(object.message);\n    }\n\n    if (!error.stack && Error.captureStackTrace) {\n      Error.captureStackTrace(error, deserializeError);\n    }\n\n    return error;\n  }\n\n  return new Error(String(object));\n}; // inspired from https://github.com/sindresorhus/serialize-error/blob/master/index.js\n\n\nvar serializeError = function serializeError(value) {\n  if (!value) return value;\n\n  if (typeof value === \"object\") {\n    return destroyCircular(value, []);\n  }\n\n  if (typeof value === \"function\") {\n    return \"[Function: \" + (value.name || \"anonymous\") + \"]\";\n  }\n\n  return value;\n}; // https://www.npmjs.com/package/destroy-circular\n\n\nfunction destroyCircular(from, seen) {\n  var to = {};\n  seen.push(from);\n\n  for (var _i = 0, _a = Object.keys(from); _i < _a.length; _i++) {\n    var key = _a[_i];\n    var value = from[key];\n\n    if (typeof value === \"function\") {\n      continue;\n    }\n\n    if (!value || typeof value !== \"object\") {\n      to[key] = value;\n      continue;\n    }\n\n    if (seen.indexOf(from[key]) === -1) {\n      to[key] = destroyCircular(from[key], seen.slice(0));\n      continue;\n    }\n\n    to[key] = \"[Circular]\";\n  }\n\n  if (typeof from.name === \"string\") {\n    to.name = from.name;\n  }\n\n  if (typeof from.message === \"string\") {\n    to.message = from.message;\n  }\n\n  if (typeof from.stack === \"string\") {\n    to.stack = from.stack;\n  }\n\n  return to;\n}\n\nvar AccountNameRequiredError = createCustomErrorClass(\"AccountNameRequired\");\nvar AccountNotSupported = createCustomErrorClass(\"AccountNotSupported\");\nvar AmountRequired = createCustomErrorClass(\"AmountRequired\");\nvar BluetoothRequired = createCustomErrorClass(\"BluetoothRequired\");\nvar BtcUnmatchedApp = createCustomErrorClass(\"BtcUnmatchedApp\");\nvar CantOpenDevice = createCustomErrorClass(\"CantOpenDevice\");\nvar CashAddrNotSupported = createCustomErrorClass(\"CashAddrNotSupported\");\nvar CurrencyNotSupported = createCustomErrorClass(\"CurrencyNotSupported\");\nvar DeviceAppVerifyNotSupported = createCustomErrorClass(\"DeviceAppVerifyNotSupported\");\nvar DeviceGenuineSocketEarlyClose = createCustomErrorClass(\"DeviceGenuineSocketEarlyClose\");\nvar DeviceNotGenuineError = createCustomErrorClass(\"DeviceNotGenuine\");\nvar DeviceOnDashboardExpected = createCustomErrorClass(\"DeviceOnDashboardExpected\");\nvar DeviceOnDashboardUnexpected = createCustomErrorClass(\"DeviceOnDashboardUnexpected\");\nvar DeviceInOSUExpected = createCustomErrorClass(\"DeviceInOSUExpected\");\nvar DeviceHalted = createCustomErrorClass(\"DeviceHalted\");\nvar DeviceNameInvalid = createCustomErrorClass(\"DeviceNameInvalid\");\nvar DeviceSocketFail = createCustomErrorClass(\"DeviceSocketFail\");\nvar DeviceSocketNoBulkStatus = createCustomErrorClass(\"DeviceSocketNoBulkStatus\");\nvar DisconnectedDevice = createCustomErrorClass(\"DisconnectedDevice\");\nvar DisconnectedDeviceDuringOperation = createCustomErrorClass(\"DisconnectedDeviceDuringOperation\");\nvar EnpointConfigError = createCustomErrorClass(\"EnpointConfig\");\nvar EthAppPleaseEnableContractData = createCustomErrorClass(\"EthAppPleaseEnableContractData\");\nvar FeeEstimationFailed = createCustomErrorClass(\"FeeEstimationFailed\");\nvar FirmwareNotRecognized = createCustomErrorClass(\"FirmwareNotRecognized\");\nvar HardResetFail = createCustomErrorClass(\"HardResetFail\");\nvar InvalidXRPTag = createCustomErrorClass(\"InvalidXRPTag\");\nvar InvalidAddress = createCustomErrorClass(\"InvalidAddress\");\nvar InvalidAddressBecauseDestinationIsAlsoSource = createCustomErrorClass(\"InvalidAddressBecauseDestinationIsAlsoSource\");\nvar LatestMCUInstalledError = createCustomErrorClass(\"LatestMCUInstalledError\");\nvar UnknownMCU = createCustomErrorClass(\"UnknownMCU\");\nvar LedgerAPIError = createCustomErrorClass(\"LedgerAPIError\");\nvar LedgerAPIErrorWithMessage = createCustomErrorClass(\"LedgerAPIErrorWithMessage\");\nvar LedgerAPINotAvailable = createCustomErrorClass(\"LedgerAPINotAvailable\");\nvar ManagerAppAlreadyInstalledError = createCustomErrorClass(\"ManagerAppAlreadyInstalled\");\nvar ManagerAppRelyOnBTCError = createCustomErrorClass(\"ManagerAppRelyOnBTC\");\nvar ManagerAppDepInstallRequired = createCustomErrorClass(\"ManagerAppDepInstallRequired\");\nvar ManagerAppDepUninstallRequired = createCustomErrorClass(\"ManagerAppDepUninstallRequired\");\nvar ManagerDeviceLockedError = createCustomErrorClass(\"ManagerDeviceLocked\");\nvar ManagerFirmwareNotEnoughSpaceError = createCustomErrorClass(\"ManagerFirmwareNotEnoughSpace\");\nvar ManagerNotEnoughSpaceError = createCustomErrorClass(\"ManagerNotEnoughSpace\");\nvar ManagerUninstallBTCDep = createCustomErrorClass(\"ManagerUninstallBTCDep\");\nvar NetworkDown = createCustomErrorClass(\"NetworkDown\");\nvar NoAddressesFound = createCustomErrorClass(\"NoAddressesFound\");\nvar NotEnoughBalance = createCustomErrorClass(\"NotEnoughBalance\");\nvar NotEnoughBalanceToDelegate = createCustomErrorClass(\"NotEnoughBalanceToDelegate\");\nvar NotEnoughBalanceInParentAccount = createCustomErrorClass(\"NotEnoughBalanceInParentAccount\");\nvar NotEnoughSpendableBalance = createCustomErrorClass(\"NotEnoughSpendableBalance\");\nvar NotEnoughBalanceBecauseDestinationNotCreated = createCustomErrorClass(\"NotEnoughBalanceBecauseDestinationNotCreated\");\nvar NoAccessToCamera = createCustomErrorClass(\"NoAccessToCamera\");\nvar NotEnoughGas = createCustomErrorClass(\"NotEnoughGas\");\nvar NotSupportedLegacyAddress = createCustomErrorClass(\"NotSupportedLegacyAddress\");\nvar GasLessThanEstimate = createCustomErrorClass(\"GasLessThanEstimate\");\nvar PasswordsDontMatchError = createCustomErrorClass(\"PasswordsDontMatch\");\nvar PasswordIncorrectError = createCustomErrorClass(\"PasswordIncorrect\");\nvar RecommendSubAccountsToEmpty = createCustomErrorClass(\"RecommendSubAccountsToEmpty\");\nvar RecommendUndelegation = createCustomErrorClass(\"RecommendUndelegation\");\nvar TimeoutTagged = createCustomErrorClass(\"TimeoutTagged\");\nvar UnexpectedBootloader = createCustomErrorClass(\"UnexpectedBootloader\");\nvar MCUNotGenuineToDashboard = createCustomErrorClass(\"MCUNotGenuineToDashboard\");\nvar RecipientRequired = createCustomErrorClass(\"RecipientRequired\");\nvar UnavailableTezosOriginatedAccountReceive = createCustomErrorClass(\"UnavailableTezosOriginatedAccountReceive\");\nvar UnavailableTezosOriginatedAccountSend = createCustomErrorClass(\"UnavailableTezosOriginatedAccountSend\");\nvar UpdateFetchFileFail = createCustomErrorClass(\"UpdateFetchFileFail\");\nvar UpdateIncorrectHash = createCustomErrorClass(\"UpdateIncorrectHash\");\nvar UpdateIncorrectSig = createCustomErrorClass(\"UpdateIncorrectSig\");\nvar UpdateYourApp = createCustomErrorClass(\"UpdateYourApp\");\nvar UserRefusedDeviceNameChange = createCustomErrorClass(\"UserRefusedDeviceNameChange\");\nvar UserRefusedAddress = createCustomErrorClass(\"UserRefusedAddress\");\nvar UserRefusedFirmwareUpdate = createCustomErrorClass(\"UserRefusedFirmwareUpdate\");\nvar UserRefusedAllowManager = createCustomErrorClass(\"UserRefusedAllowManager\");\nvar UserRefusedOnDevice = createCustomErrorClass(\"UserRefusedOnDevice\"); // TODO rename because it's just for transaction refusal\n\nvar TransportOpenUserCancelled = createCustomErrorClass(\"TransportOpenUserCancelled\");\nvar TransportInterfaceNotAvailable = createCustomErrorClass(\"TransportInterfaceNotAvailable\");\nvar TransportRaceCondition = createCustomErrorClass(\"TransportRaceCondition\");\nvar TransportWebUSBGestureRequired = createCustomErrorClass(\"TransportWebUSBGestureRequired\");\nvar DeviceShouldStayInApp = createCustomErrorClass(\"DeviceShouldStayInApp\");\nvar WebsocketConnectionError = createCustomErrorClass(\"WebsocketConnectionError\");\nvar WebsocketConnectionFailed = createCustomErrorClass(\"WebsocketConnectionFailed\");\nvar WrongDeviceForAccount = createCustomErrorClass(\"WrongDeviceForAccount\");\nvar WrongAppForCurrency = createCustomErrorClass(\"WrongAppForCurrency\");\nvar ETHAddressNonEIP = createCustomErrorClass(\"ETHAddressNonEIP\");\nvar CantScanQRCode = createCustomErrorClass(\"CantScanQRCode\");\nvar FeeNotLoaded = createCustomErrorClass(\"FeeNotLoaded\");\nvar FeeRequired = createCustomErrorClass(\"FeeRequired\");\nvar FeeTooHigh = createCustomErrorClass(\"FeeTooHigh\");\nvar SyncError = createCustomErrorClass(\"SyncError\");\nvar PairingFailed = createCustomErrorClass(\"PairingFailed\");\nvar GenuineCheckFailed = createCustomErrorClass(\"GenuineCheckFailed\");\nvar LedgerAPI4xx = createCustomErrorClass(\"LedgerAPI4xx\");\nvar LedgerAPI5xx = createCustomErrorClass(\"LedgerAPI5xx\");\nvar FirmwareOrAppUpdateRequired = createCustomErrorClass(\"FirmwareOrAppUpdateRequired\"); // db stuff, no need to translate\n\nvar NoDBPathGiven = createCustomErrorClass(\"NoDBPathGiven\");\nvar DBWrongPassword = createCustomErrorClass(\"DBWrongPassword\");\nvar DBNotReset = createCustomErrorClass(\"DBNotReset\");\n/**\r\n * TransportError is used for any generic transport errors.\r\n * e.g. Error thrown when data received by exchanges are incorrect or if exchanged failed to communicate with the device for various reason.\r\n */\n\nfunction TransportError(message, id) {\n  this.name = \"TransportError\";\n  this.message = message;\n  this.stack = new Error().stack;\n  this.id = id;\n}\n\nTransportError.prototype = new Error();\naddCustomErrorDeserializer(\"TransportError\", function (e) {\n  return new TransportError(e.message, e.id);\n});\nvar StatusCodes = {\n  PIN_REMAINING_ATTEMPTS: 0x63c0,\n  INCORRECT_LENGTH: 0x6700,\n  MISSING_CRITICAL_PARAMETER: 0x6800,\n  COMMAND_INCOMPATIBLE_FILE_STRUCTURE: 0x6981,\n  SECURITY_STATUS_NOT_SATISFIED: 0x6982,\n  CONDITIONS_OF_USE_NOT_SATISFIED: 0x6985,\n  INCORRECT_DATA: 0x6a80,\n  NOT_ENOUGH_MEMORY_SPACE: 0x6a84,\n  REFERENCED_DATA_NOT_FOUND: 0x6a88,\n  FILE_ALREADY_EXISTS: 0x6a89,\n  INCORRECT_P1_P2: 0x6b00,\n  INS_NOT_SUPPORTED: 0x6d00,\n  CLA_NOT_SUPPORTED: 0x6e00,\n  TECHNICAL_PROBLEM: 0x6f00,\n  OK: 0x9000,\n  MEMORY_PROBLEM: 0x9240,\n  NO_EF_SELECTED: 0x9400,\n  INVALID_OFFSET: 0x9402,\n  FILE_NOT_FOUND: 0x9404,\n  INCONSISTENT_FILE: 0x9408,\n  ALGORITHM_NOT_SUPPORTED: 0x9484,\n  INVALID_KCV: 0x9485,\n  CODE_NOT_INITIALIZED: 0x9802,\n  ACCESS_CONDITION_NOT_FULFILLED: 0x9804,\n  CONTRADICTION_SECRET_CODE_STATUS: 0x9808,\n  CONTRADICTION_INVALIDATION: 0x9810,\n  CODE_BLOCKED: 0x9840,\n  MAX_VALUE_REACHED: 0x9850,\n  GP_AUTH_FAILED: 0x6300,\n  LICENSING: 0x6f42,\n  HALTED: 0x6faa\n};\n\nfunction getAltStatusMessage(code) {\n  switch (code) {\n    // improve text of most common errors\n    case 0x6700:\n      return \"Incorrect length\";\n\n    case 0x6800:\n      return \"Missing critical parameter\";\n\n    case 0x6982:\n      return \"Security not satisfied (dongle locked or have invalid access rights)\";\n\n    case 0x6985:\n      return \"Condition of use not satisfied (denied by the user?)\";\n\n    case 0x6a80:\n      return \"Invalid data received\";\n\n    case 0x6b00:\n      return \"Invalid parameter received\";\n  }\n\n  if (0x6f00 <= code && code <= 0x6fff) {\n    return \"Internal error, please report\";\n  }\n}\n/**\r\n * Error thrown when a device returned a non success status.\r\n * the error.statusCode is one of the `StatusCodes` exported by this library.\r\n */\n\n\nfunction TransportStatusError(statusCode) {\n  this.name = \"TransportStatusError\";\n  var statusText = Object.keys(StatusCodes).find(function (k) {\n    return StatusCodes[k] === statusCode;\n  }) || \"UNKNOWN_ERROR\";\n  var smsg = getAltStatusMessage(statusCode) || statusText;\n  var statusCodeStr = statusCode.toString(16);\n  this.message = \"Ledger device: \" + smsg + \" (0x\" + statusCodeStr + \")\";\n  this.stack = new Error().stack;\n  this.statusCode = statusCode;\n  this.statusText = statusText;\n}\n\nTransportStatusError.prototype = new Error();\naddCustomErrorDeserializer(\"TransportStatusError\", function (e) {\n  return new TransportStatusError(e.statusCode);\n});\nexport { AccountNameRequiredError, AccountNotSupported, AmountRequired, BluetoothRequired, BtcUnmatchedApp, CantOpenDevice, CantScanQRCode, CashAddrNotSupported, CurrencyNotSupported, DBNotReset, DBWrongPassword, DeviceAppVerifyNotSupported, DeviceGenuineSocketEarlyClose, DeviceHalted, DeviceInOSUExpected, DeviceNameInvalid, DeviceNotGenuineError, DeviceOnDashboardExpected, DeviceOnDashboardUnexpected, DeviceShouldStayInApp, DeviceSocketFail, DeviceSocketNoBulkStatus, DisconnectedDevice, DisconnectedDeviceDuringOperation, ETHAddressNonEIP, EnpointConfigError, EthAppPleaseEnableContractData, FeeEstimationFailed, FeeNotLoaded, FeeRequired, FeeTooHigh, FirmwareNotRecognized, FirmwareOrAppUpdateRequired, GasLessThanEstimate, GenuineCheckFailed, HardResetFail, InvalidAddress, InvalidAddressBecauseDestinationIsAlsoSource, InvalidXRPTag, LatestMCUInstalledError, LedgerAPI4xx, LedgerAPI5xx, LedgerAPIError, LedgerAPIErrorWithMessage, LedgerAPINotAvailable, MCUNotGenuineToDashboard, ManagerAppAlreadyInstalledError, ManagerAppDepInstallRequired, ManagerAppDepUninstallRequired, ManagerAppRelyOnBTCError, ManagerDeviceLockedError, ManagerFirmwareNotEnoughSpaceError, ManagerNotEnoughSpaceError, ManagerUninstallBTCDep, NetworkDown, NoAccessToCamera, NoAddressesFound, NoDBPathGiven, NotEnoughBalance, NotEnoughBalanceBecauseDestinationNotCreated, NotEnoughBalanceInParentAccount, NotEnoughBalanceToDelegate, NotEnoughGas, NotEnoughSpendableBalance, NotSupportedLegacyAddress, PairingFailed, PasswordIncorrectError, PasswordsDontMatchError, RecipientRequired, RecommendSubAccountsToEmpty, RecommendUndelegation, StatusCodes, SyncError, TimeoutTagged, TransportError, TransportInterfaceNotAvailable, TransportOpenUserCancelled, TransportRaceCondition, TransportStatusError, TransportWebUSBGestureRequired, UnavailableTezosOriginatedAccountReceive, UnavailableTezosOriginatedAccountSend, UnexpectedBootloader, UnknownMCU, UpdateFetchFileFail, UpdateIncorrectHash, UpdateIncorrectSig, UpdateYourApp, UserRefusedAddress, UserRefusedAllowManager, UserRefusedDeviceNameChange, UserRefusedFirmwareUpdate, UserRefusedOnDevice, WebsocketConnectionError, WebsocketConnectionFailed, WrongAppForCurrency, WrongDeviceForAccount, addCustomErrorDeserializer, createCustomErrorClass, deserializeError, getAltStatusMessage, serializeError };","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\n\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\n\nmodule.exports = EventEmitter;\nmodule.exports.once = once; // Backwards-compat with node 0.10.x\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\n\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function get() {\n    return defaultMaxListeners;\n  },\n  set: function set(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}; // Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\n\n\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args.push(arguments[i]);\n  }\n\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.\n\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    } // At least give some kind of context to the user\n\n\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n\n    for (var i = 0; i < len; ++i) {\n      ReflectApply(listeners[i], this, args);\n    }\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n\n      events = target._events;\n    }\n\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    } // Check for listener leak\n\n\n    m = _getMaxListeners(target);\n\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true; // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n}; // Emits a 'removeListener' event if and only if the listener was removed.\n\n\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this; // not listening for removeListener, no need to emit\n\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n\n    return this;\n  } // emit removeListener for all listeners on all events\n\n\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\n\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    copy[i] = arr[i];\n  }\n\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) {\n    list[index] = list[index + 1];\n  }\n\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n\n      resolve([].slice.call(arguments));\n    }\n\n    ;\n    eventTargetAgnosticAddListener(emitter, name, resolver, {\n      once: true\n    });\n\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, {\n        once: true\n      });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}","import _regeneratorRuntime from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { sign, isSupported } from \"u2f-api\";\nimport Transport from \"@ledgerhq/hw-transport\";\nimport { log } from \"@ledgerhq/logs\";\nimport { TransportError } from \"@ledgerhq/errors\";\n\nfunction wrapU2FTransportError(originalError, message, id) {\n  var err = new TransportError(message, id); // $FlowFixMe\n\n  err.originalError = originalError;\n  return err;\n}\n\nfunction wrapApdu(apdu, key) {\n  var result = Buffer.alloc(apdu.length);\n\n  for (var i = 0; i < apdu.length; i++) {\n    result[i] = apdu[i] ^ key[i % key.length];\n  }\n\n  return result;\n} // Convert from normal to web-safe, strip trailing \"=\"s\n\n\nvar webSafe64 = function webSafe64(base64) {\n  return base64.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n}; // Convert from web-safe to normal, add trailing \"=\"s\n\n\nvar normal64 = function normal64(base64) {\n  return base64.replace(/-/g, \"+\").replace(/_/g, \"/\") + \"==\".substring(0, 3 * base64.length % 4);\n};\n\nfunction attemptExchange(apdu, timeoutMillis, scrambleKey, unwrap) {\n  var keyHandle = wrapApdu(apdu, scrambleKey);\n  var challenge = Buffer.from(\"0000000000000000000000000000000000000000000000000000000000000000\", \"hex\");\n  var signRequest = {\n    version: \"U2F_V2\",\n    keyHandle: webSafe64(keyHandle.toString(\"base64\")),\n    challenge: webSafe64(challenge.toString(\"base64\")),\n    appId: location.origin\n  };\n  log(\"apdu\", \"=> \" + apdu.toString(\"hex\"));\n  return sign(signRequest, timeoutMillis / 1000).then(function (response) {\n    var signatureData = response.signatureData;\n\n    if (typeof signatureData === \"string\") {\n      var data = Buffer.from(normal64(signatureData), \"base64\");\n      var result;\n\n      if (!unwrap) {\n        result = data;\n      } else {\n        result = data.slice(5);\n      }\n\n      log(\"apdu\", \"<= \" + result.toString(\"hex\"));\n      return result;\n    } else {\n      throw response;\n    }\n  });\n}\n\nvar transportInstances = [];\n\nfunction emitDisconnect() {\n  transportInstances.forEach(function (t) {\n    return t.emit(\"disconnect\");\n  });\n  transportInstances = [];\n}\n\nfunction isTimeoutU2FError(u2fError) {\n  return u2fError.metaData.code === 5;\n}\n/**\n * U2F web Transport implementation\n * @example\n * import TransportU2F from \"@ledgerhq/hw-transport-u2f\";\n * ...\n * TransportU2F.create().then(transport => ...)\n */\n\n\nvar TransportU2F = /*#__PURE__*/function (_Transport) {\n  _inherits(TransportU2F, _Transport);\n\n  var _super = _createSuper(TransportU2F);\n\n  _createClass(TransportU2F, null, [{\n    key: \"open\",\n\n    /*\n     */\n\n    /*\n     */\n\n    /**\n     * static function to create a new Transport from a connected Ledger device discoverable via U2F (browser support)\n     */\n    value: function () {\n      var _open = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_) {\n        var _openTimeout,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _openTimeout = _args.length > 1 && _args[1] !== undefined ? _args[1] : 5000;\n                return _context.abrupt(\"return\", new TransportU2F());\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function open(_x) {\n        return _open.apply(this, arguments);\n      }\n\n      return open;\n    }()\n  }]);\n\n  function TransportU2F() {\n    var _this;\n\n    _classCallCheck(this, TransportU2F);\n\n    _this = _super.call(this);\n    _this.scrambleKey = void 0;\n    _this.unwrap = true;\n    transportInstances.push(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * Exchange with the device using APDU protocol.\n   * @param apdu\n   * @returns a promise of apdu response\n   */\n\n\n  _createClass(TransportU2F, [{\n    key: \"exchange\",\n    value: function () {\n      var _exchange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(apdu) {\n        var isU2FError;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return attemptExchange(apdu, this.exchangeTimeout, this.scrambleKey, this.unwrap);\n\n              case 3:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](0);\n                isU2FError = typeof _context2.t0.metaData === \"object\";\n\n                if (!isU2FError) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                if (isTimeoutU2FError(_context2.t0)) {\n                  emitDisconnect();\n                } // the wrapping make error more usable and \"printable\" to the end user.\n\n\n                throw wrapU2FTransportError(_context2.t0, \"Failed to sign with Ledger device: U2F \" + _context2.t0.metaData.type, \"U2F_\" + _context2.t0.metaData.code);\n\n              case 14:\n                throw _context2.t0;\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 6]]);\n      }));\n\n      function exchange(_x2) {\n        return _exchange.apply(this, arguments);\n      }\n\n      return exchange;\n    }()\n    /**\n     */\n\n  }, {\n    key: \"setScrambleKey\",\n    value: function setScrambleKey(scrambleKey) {\n      this.scrambleKey = Buffer.from(scrambleKey, \"ascii\");\n    }\n    /**\n     */\n\n  }, {\n    key: \"setUnwrap\",\n    value: function setUnwrap(unwrap) {\n      this.unwrap = unwrap;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      // u2f have no way to clean things up\n      return Promise.resolve();\n    }\n  }]);\n\n  return TransportU2F;\n}(Transport);\n\nexport { TransportU2F as default };\nTransportU2F.isSupported = isSupported;\n\nTransportU2F.list = function () {\n  return (// this transport is not discoverable but we are going to guess if it is here with isSupported()\n    isSupported().then(function (supported) {\n      return supported ? [null] : [];\n    })\n  );\n};\n\nTransportU2F.listen = function (observer) {\n  var unsubscribed = false;\n  isSupported().then(function (supported) {\n    if (unsubscribed) return;\n\n    if (supported) {\n      observer.next({\n        type: \"add\",\n        descriptor: null\n      });\n      observer.complete();\n    } else {\n      observer.error(new TransportError(\"U2F browser support is needed for Ledger. \" + \"Please use Chrome, Opera or Firefox with a U2F extension. \" + \"Also make sure you're on an HTTPS connection\", \"U2FNotSupported\"));\n    }\n  });\n  return {\n    unsubscribe: function unsubscribe() {\n      unsubscribed = true;\n    }\n  };\n};","'use strict';\n\nmodule.exports = require('./lib/u2f-api');","'use strict';\n\nmodule.exports = API;\n\nvar chromeApi = require('./google-u2f-api'); // Feature detection (yes really)\n\n\nvar isBrowser = typeof navigator !== 'undefined' && !!navigator.userAgent;\nvar isSafari = isBrowser && navigator.userAgent.match(/Safari\\//) && !navigator.userAgent.match(/Chrome\\//);\nvar isEDGE = isBrowser && navigator.userAgent.match(/Edge\\/1[2345]/);\nvar _backend = null;\n\nfunction getBackend(Promise) {\n  if (!_backend) _backend = new Promise(function (resolve, reject) {\n    function notSupported() {\n      // Note; {native: true} means *not* using Google's hack\n      resolve({\n        u2f: null,\n        native: true\n      });\n    }\n\n    if (!isBrowser) return notSupported();\n    if (isSafari) // Safari doesn't support U2F, and the Safari-FIDO-U2F\n      // extension lacks full support (Multi-facet apps), so we\n      // block it until proper support.\n      return notSupported();\n    var hasNativeSupport = typeof window.u2f !== 'undefined' && typeof window.u2f.sign === 'function';\n    if (hasNativeSupport) resolve({\n      u2f: window.u2f,\n      native: true\n    });\n    if (isEDGE) // We don't want to check for Google's extension hack on EDGE\n      // as it'll cause trouble (popups, etc)\n      return notSupported();\n    if (location.protocol === 'http:') // U2F isn't supported over http, only https\n      return notSupported();\n    if (typeof MessageChannel === 'undefined') // Unsupported browser, the chrome hack would throw\n      return notSupported(); // Test for google extension support\n\n    chromeApi.isSupported(function (ok) {\n      if (ok) resolve({\n        u2f: chromeApi,\n        native: false\n      });else notSupported();\n    });\n  });\n  return _backend;\n}\n\nfunction API(Promise) {\n  return {\n    isSupported: isSupported.bind(Promise),\n    ensureSupport: ensureSupport.bind(Promise),\n    register: register.bind(Promise),\n    sign: sign.bind(Promise),\n    ErrorCodes: API.ErrorCodes,\n    ErrorNames: API.ErrorNames\n  };\n}\n\nAPI.ErrorCodes = {\n  CANCELLED: -1,\n  OK: 0,\n  OTHER_ERROR: 1,\n  BAD_REQUEST: 2,\n  CONFIGURATION_UNSUPPORTED: 3,\n  DEVICE_INELIGIBLE: 4,\n  TIMEOUT: 5\n};\nAPI.ErrorNames = {\n  \"-1\": \"CANCELLED\",\n  \"0\": \"OK\",\n  \"1\": \"OTHER_ERROR\",\n  \"2\": \"BAD_REQUEST\",\n  \"3\": \"CONFIGURATION_UNSUPPORTED\",\n  \"4\": \"DEVICE_INELIGIBLE\",\n  \"5\": \"TIMEOUT\"\n};\n\nfunction makeError(msg, err) {\n  var code = err != null ? err.errorCode : 1; // Default to OTHER_ERROR\n\n  var type = API.ErrorNames['' + code];\n  var error = new Error(msg);\n  error.metaData = {\n    type: type,\n    code: code\n  };\n  return error;\n}\n\nfunction deferPromise(Promise, promise) {\n  var ret = {};\n  ret.promise = new Promise(function (resolve, reject) {\n    ret.resolve = resolve;\n    ret.reject = reject;\n    promise.then(resolve, reject);\n  });\n  /**\n   * Reject request promise and disconnect port if 'disconnect' flag is true\n   * @param {string} msg\n   * @param {boolean} disconnect\n   */\n\n  ret.promise.cancel = function (msg, disconnect) {\n    getBackend(Promise).then(function (backend) {\n      if (disconnect && !backend.native) backend.u2f.disconnect();\n      ret.reject(makeError(msg, {\n        errorCode: -1\n      }));\n    });\n  };\n\n  return ret;\n}\n\nfunction defer(Promise, fun) {\n  return deferPromise(Promise, new Promise(function (resolve, reject) {\n    try {\n      fun && fun(resolve, reject);\n    } catch (err) {\n      reject(err);\n    }\n  }));\n}\n\nfunction isSupported() {\n  var Promise = this;\n  return getBackend(Promise).then(function (backend) {\n    return !!backend.u2f;\n  });\n}\n\nfunction _ensureSupport(backend) {\n  if (!backend.u2f) {\n    if (location.protocol === 'http:') throw new Error(\"U2F isn't supported over http, only https\");\n    throw new Error(\"U2F not supported\");\n  }\n}\n\nfunction ensureSupport() {\n  var Promise = this;\n  return getBackend(Promise).then(_ensureSupport);\n}\n\nfunction register(registerRequests, signRequests\n/* = null */\n, timeout) {\n  var Promise = this;\n  if (!Array.isArray(registerRequests)) registerRequests = [registerRequests];\n\n  if (typeof signRequests === 'number' && typeof timeout === 'undefined') {\n    timeout = signRequests;\n    signRequests = null;\n  }\n\n  if (!signRequests) signRequests = [];\n  return deferPromise(Promise, getBackend(Promise).then(function (backend) {\n    _ensureSupport(backend);\n\n    var native = backend.native;\n    var u2f = backend.u2f;\n    return new Promise(function (resolve, reject) {\n      function cbNative(response) {\n        if (response.errorCode) reject(makeError(\"Registration failed\", response));else {\n          delete response.errorCode;\n          resolve(response);\n        }\n      }\n\n      function cbChrome(err, response) {\n        if (err) reject(err);else if (response.errorCode) reject(makeError(\"Registration failed\", response));else resolve(response);\n      }\n\n      if (native) {\n        var appId = registerRequests[0].appId;\n        u2f.register(appId, registerRequests, signRequests, cbNative, timeout);\n      } else {\n        u2f.register(registerRequests, signRequests, cbChrome, timeout);\n      }\n    });\n  })).promise;\n}\n\nfunction sign(signRequests, timeout) {\n  var Promise = this;\n  if (!Array.isArray(signRequests)) signRequests = [signRequests];\n  return deferPromise(Promise, getBackend(Promise).then(function (backend) {\n    _ensureSupport(backend);\n\n    var native = backend.native;\n    var u2f = backend.u2f;\n    return new Promise(function (resolve, reject) {\n      function cbNative(response) {\n        if (response.errorCode) reject(makeError(\"Sign failed\", response));else {\n          delete response.errorCode;\n          resolve(response);\n        }\n      }\n\n      function cbChrome(err, response) {\n        if (err) reject(err);else if (response.errorCode) reject(makeError(\"Sign failed\", response));else resolve(response);\n      }\n\n      if (native) {\n        var appId = signRequests[0].appId;\n        var challenge = signRequests[0].challenge;\n        u2f.sign(appId, challenge, signRequests, cbNative, timeout);\n      } else {\n        u2f.sign(signRequests, cbChrome, timeout);\n      }\n    });\n  })).promise;\n}\n\nfunction makeDefault(func) {\n  API[func] = function () {\n    if (!global.Promise) // This is very unlikely to ever happen, since browsers\n      // supporting U2F will most likely support Promises.\n      throw new Error(\"The platform doesn't natively support promises\");\n    var args = [].slice.call(arguments);\n    return API(global.Promise)[func].apply(null, args);\n  };\n} // Provide default functions using the built-in Promise if available.\n\n\nmakeDefault('isSupported');\nmakeDefault('ensureSupport');\nmakeDefault('register');\nmakeDefault('sign');","// Copyright 2014 Google Inc. All rights reserved\n//\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file or at\n// https://developers.google.com/open-source/licenses/bsd\n\n/**\n * @fileoverview The U2F api.\n */\n'use strict';\n/** Namespace for the U2F api.\n * @type {Object}\n */\n\nvar u2f = u2f || {};\nmodule.exports = u2f; // Adaptation for u2f-api package\n\n/**\n * The U2F extension id\n * @type {string}\n * @const\n */\n\nu2f.EXTENSION_ID = 'kmendfapggjehodndflmmgagdbamhnfd';\n/**\n * Message types for messsages to/from the extension\n * @const\n * @enum {string}\n */\n\nu2f.MessageTypes = {\n  'U2F_REGISTER_REQUEST': 'u2f_register_request',\n  'U2F_SIGN_REQUEST': 'u2f_sign_request',\n  'U2F_REGISTER_RESPONSE': 'u2f_register_response',\n  'U2F_SIGN_RESPONSE': 'u2f_sign_response'\n};\n/**\n * Response status codes\n * @const\n * @enum {number}\n */\n\nu2f.ErrorCodes = {\n  'OK': 0,\n  'OTHER_ERROR': 1,\n  'BAD_REQUEST': 2,\n  'CONFIGURATION_UNSUPPORTED': 3,\n  'DEVICE_INELIGIBLE': 4,\n  'TIMEOUT': 5\n};\n/**\n * A message type for registration requests\n * @typedef {{\n *   type: u2f.MessageTypes,\n *   signRequests: Array.<u2f.SignRequest>,\n *   registerRequests: ?Array.<u2f.RegisterRequest>,\n *   timeoutSeconds: ?number,\n *   requestId: ?number\n * }}\n */\n\nu2f.Request;\n/**\n * A message for registration responses\n * @typedef {{\n *   type: u2f.MessageTypes,\n *   responseData: (u2f.Error | u2f.RegisterResponse | u2f.SignResponse),\n *   requestId: ?number\n * }}\n */\n\nu2f.Response;\n/**\n * An error object for responses\n * @typedef {{\n *   errorCode: u2f.ErrorCodes,\n *   errorMessage: ?string\n * }}\n */\n\nu2f.Error;\n/**\n * Data object for a single sign request.\n * @typedef {{\n *   version: string,\n *   challenge: string,\n *   keyHandle: string,\n *   appId: string\n * }}\n */\n\nu2f.SignRequest;\n/**\n * Data object for a sign response.\n * @typedef {{\n *   keyHandle: string,\n *   signatureData: string,\n *   clientData: string\n * }}\n */\n\nu2f.SignResponse;\n/**\n * Data object for a registration request.\n * @typedef {{\n *   version: string,\n *   challenge: string,\n *   appId: string\n * }}\n */\n\nu2f.RegisterRequest;\n/**\n * Data object for a registration response.\n * @typedef {{\n *   registrationData: string,\n *   clientData: string\n * }}\n */\n\nu2f.RegisterResponse; // Low level MessagePort API support\n\n/**\n * Call MessagePort disconnect\n */\n\nu2f.disconnect = function () {\n  if (u2f.port_ && u2f.port_.port_) {\n    u2f.port_.port_.disconnect();\n    u2f.port_ = null;\n  }\n};\n/**\n * Sets up a MessagePort to the U2F extension using the\n * available mechanisms.\n * @param {function((MessagePort|u2f.WrappedChromeRuntimePort_))} callback\n */\n\n\nu2f.getMessagePort = function (callback) {\n  if (typeof chrome != 'undefined' && chrome.runtime) {\n    // The actual message here does not matter, but we need to get a reply\n    // for the callback to run. Thus, send an empty signature request\n    // in order to get a failure response.\n    var msg = {\n      type: u2f.MessageTypes.U2F_SIGN_REQUEST,\n      signRequests: []\n    };\n    chrome.runtime.sendMessage(u2f.EXTENSION_ID, msg, function () {\n      if (!chrome.runtime.lastError) {\n        // We are on a whitelisted origin and can talk directly\n        // with the extension.\n        u2f.getChromeRuntimePort_(callback);\n      } else {\n        // chrome.runtime was available, but we couldn't message\n        // the extension directly, use iframe\n        u2f.getIframePort_(callback);\n      }\n    });\n  } else {\n    // chrome.runtime was not available at all, which is normal\n    // when this origin doesn't have access to any extensions.\n    u2f.getIframePort_(callback);\n  }\n};\n/**\n * Connects directly to the extension via chrome.runtime.connect\n * @param {function(u2f.WrappedChromeRuntimePort_)} callback\n * @private\n */\n\n\nu2f.getChromeRuntimePort_ = function (callback) {\n  var port = chrome.runtime.connect(u2f.EXTENSION_ID, {\n    'includeTlsChannelId': true\n  });\n  setTimeout(function () {\n    callback(null, new u2f.WrappedChromeRuntimePort_(port));\n  }, 0);\n};\n/**\n * A wrapper for chrome.runtime.Port that is compatible with MessagePort.\n * @param {Port} port\n * @constructor\n * @private\n */\n\n\nu2f.WrappedChromeRuntimePort_ = function (port) {\n  this.port_ = port;\n};\n/**\n * Posts a message on the underlying channel.\n * @param {Object} message\n */\n\n\nu2f.WrappedChromeRuntimePort_.prototype.postMessage = function (message) {\n  this.port_.postMessage(message);\n};\n/**\n * Emulates the HTML 5 addEventListener interface. Works only for the\n * onmessage event, which is hooked up to the chrome.runtime.Port.onMessage.\n * @param {string} eventName\n * @param {function({data: Object})} handler\n */\n\n\nu2f.WrappedChromeRuntimePort_.prototype.addEventListener = function (eventName, handler) {\n  var name = eventName.toLowerCase();\n\n  if (name == 'message' || name == 'onmessage') {\n    this.port_.onMessage.addListener(function (message) {\n      // Emulate a minimal MessageEvent object\n      handler({\n        'data': message\n      });\n    });\n  } else {\n    console.error('WrappedChromeRuntimePort only supports onMessage');\n  }\n};\n/**\n * Sets up an embedded trampoline iframe, sourced from the extension.\n * @param {function(MessagePort)} callback\n * @private\n */\n\n\nu2f.getIframePort_ = function (callback) {\n  // Create the iframe\n  var iframeOrigin = 'chrome-extension://' + u2f.EXTENSION_ID;\n  var iframe = document.createElement('iframe');\n  iframe.src = iframeOrigin + '/u2f-comms.html';\n  iframe.setAttribute('style', 'display:none');\n  document.body.appendChild(iframe);\n  var hasCalledBack = false;\n  var channel = new MessageChannel();\n\n  var ready = function ready(message) {\n    if (message.data == 'ready') {\n      channel.port1.removeEventListener('message', ready);\n\n      if (!hasCalledBack) {\n        hasCalledBack = true;\n        callback(null, channel.port1);\n      }\n    } else {\n      console.error('First event on iframe port was not \"ready\"');\n    }\n  };\n\n  channel.port1.addEventListener('message', ready);\n  channel.port1.start();\n  iframe.addEventListener('load', function () {\n    // Deliver the port to the iframe and initialize\n    iframe.contentWindow.postMessage('init', iframeOrigin, [channel.port2]);\n  }); // Give this 200ms to initialize, after that, we treat this method as failed\n\n  setTimeout(function () {\n    if (!hasCalledBack) {\n      hasCalledBack = true;\n      callback(new Error(\"IFrame extension not supported\"));\n    }\n  }, 200);\n}; // High-level JS API\n\n/**\n * Default extension response timeout in seconds.\n * @const\n */\n\n\nu2f.EXTENSION_TIMEOUT_SEC = 30;\n/**\n * A singleton instance for a MessagePort to the extension.\n * @type {MessagePort|u2f.WrappedChromeRuntimePort_}\n * @private\n */\n\nu2f.port_ = null;\n/**\n * Callbacks waiting for a port\n * @type {Array.<function((MessagePort|u2f.WrappedChromeRuntimePort_))>}\n * @private\n */\n\nu2f.waitingForPort_ = [];\n/**\n * A counter for requestIds.\n * @type {number}\n * @private\n */\n\nu2f.reqCounter_ = 0;\n/**\n * A map from requestIds to client callbacks\n * @type {Object.<number,(function((u2f.Error|u2f.RegisterResponse))\n *                       |function((u2f.Error|u2f.SignResponse)))>}\n * @private\n */\n\nu2f.callbackMap_ = {};\n/**\n * Creates or retrieves the MessagePort singleton to use.\n * @param {function((MessagePort|u2f.WrappedChromeRuntimePort_))} callback\n * @private\n */\n\nu2f.getPortSingleton_ = function (callback) {\n  if (u2f.port_) {\n    callback(null, u2f.port_);\n  } else {\n    if (u2f.waitingForPort_.length == 0) {\n      u2f.getMessagePort(function (err, port) {\n        if (!err) {\n          u2f.port_ = port;\n          u2f.port_.addEventListener('message',\n          /** @type {function(Event)} */\n          u2f.responseHandler_);\n        } // Careful, here be async callbacks. Maybe.\n\n\n        while (u2f.waitingForPort_.length) {\n          u2f.waitingForPort_.shift()(err, port);\n        }\n      });\n    }\n\n    u2f.waitingForPort_.push(callback);\n  }\n};\n/**\n * Handles response messages from the extension.\n * @param {MessageEvent.<u2f.Response>} message\n * @private\n */\n\n\nu2f.responseHandler_ = function (message) {\n  var response = message.data;\n  var reqId = response['requestId'];\n\n  if (!reqId || !u2f.callbackMap_[reqId]) {\n    console.error('Unknown or missing requestId in response.');\n    return;\n  }\n\n  var cb = u2f.callbackMap_[reqId];\n  delete u2f.callbackMap_[reqId];\n  cb(null, response['responseData']);\n};\n/**\n * Calls the callback with true or false as first and only argument\n * @param {Function} callback\n */\n\n\nu2f.isSupported = function (callback) {\n  u2f.getPortSingleton_(function (err, port) {\n    callback(!err);\n  });\n};\n/**\n * Dispatches an array of sign requests to available U2F tokens.\n * @param {Array.<u2f.SignRequest>} signRequests\n * @param {function((u2f.Error|u2f.SignResponse))} callback\n * @param {number=} opt_timeoutSeconds\n */\n\n\nu2f.sign = function (signRequests, callback, opt_timeoutSeconds) {\n  u2f.getPortSingleton_(function (err, port) {\n    if (err) return callback(err);\n    var reqId = ++u2f.reqCounter_;\n    u2f.callbackMap_[reqId] = callback;\n    var req = {\n      type: u2f.MessageTypes.U2F_SIGN_REQUEST,\n      signRequests: signRequests,\n      timeoutSeconds: typeof opt_timeoutSeconds !== 'undefined' ? opt_timeoutSeconds : u2f.EXTENSION_TIMEOUT_SEC,\n      requestId: reqId\n    };\n    port.postMessage(req);\n  });\n};\n/**\n * Dispatches register requests to available U2F tokens. An array of sign\n * requests identifies already registered tokens.\n * @param {Array.<u2f.RegisterRequest>} registerRequests\n * @param {Array.<u2f.SignRequest>} signRequests\n * @param {function((u2f.Error|u2f.RegisterResponse))} callback\n * @param {number=} opt_timeoutSeconds\n */\n\n\nu2f.register = function (registerRequests, signRequests, callback, opt_timeoutSeconds) {\n  u2f.getPortSingleton_(function (err, port) {\n    if (err) return callback(err);\n    var reqId = ++u2f.reqCounter_;\n    u2f.callbackMap_[reqId] = callback;\n    var req = {\n      type: u2f.MessageTypes.U2F_REGISTER_REQUEST,\n      signRequests: signRequests,\n      registerRequests: registerRequests,\n      timeoutSeconds: typeof opt_timeoutSeconds !== 'undefined' ? opt_timeoutSeconds : u2f.EXTENSION_TIMEOUT_SEC,\n      requestId: reqId\n    };\n    port.postMessage(req);\n  });\n};","import _createForOfIteratorHelper from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _regeneratorRuntime from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sora/keystone/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport EventEmitter from \"events\";\nimport { TransportRaceCondition, TransportError, StatusCodes, getAltStatusMessage, TransportStatusError } from \"@ledgerhq/errors\";\nexport { TransportError, TransportStatusError, StatusCodes, getAltStatusMessage };\n/**\n */\n\n/**\n * Transport defines the generic interface to share between node/u2f impl\n * A **Descriptor** is a parametric type that is up to be determined for the implementation.\n * it can be for instance an ID, an file path, a URL,...\n */\n\nvar Transport = /*#__PURE__*/function () {\n  function Transport() {\n    var _this = this;\n\n    _classCallCheck(this, Transport);\n\n    this.exchangeTimeout = 30000;\n    this.unresponsiveTimeout = 15000;\n    this.deviceModel = null;\n    this._events = new EventEmitter();\n\n    this.send = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(cla, ins, p1, p2) {\n        var data,\n            statusList,\n            response,\n            sw,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = _args.length > 4 && _args[4] !== undefined ? _args[4] : Buffer.alloc(0);\n                statusList = _args.length > 5 && _args[5] !== undefined ? _args[5] : [StatusCodes.OK];\n\n                if (!(data.length >= 256)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                throw new TransportError(\"data.length exceed 256 bytes limit. Got: \" + data.length, \"DataLengthTooBig\");\n\n              case 4:\n                _context.next = 6;\n                return _this.exchange(Buffer.concat([Buffer.from([cla, ins, p1, p2]), Buffer.from([data.length]), data]));\n\n              case 6:\n                response = _context.sent;\n                sw = response.readUInt16BE(response.length - 2);\n\n                if (statusList.some(function (s) {\n                  return s === sw;\n                })) {\n                  _context.next = 10;\n                  break;\n                }\n\n                throw new TransportStatusError(sw);\n\n              case 10:\n                return _context.abrupt(\"return\", response);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2, _x3, _x4) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.exchangeBusyPromise = void 0;\n\n    this.exchangeAtomicImpl = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(f) {\n        var resolveBusy, busyPromise, unresponsiveReached, timeout, res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!_this.exchangeBusyPromise) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw new TransportRaceCondition(\"An action was already pending on the Ledger device. Please deny or reconnect.\");\n\n              case 2:\n                busyPromise = new Promise(function (r) {\n                  resolveBusy = r;\n                });\n                _this.exchangeBusyPromise = busyPromise;\n                unresponsiveReached = false;\n                timeout = setTimeout(function () {\n                  unresponsiveReached = true;\n\n                  _this.emit(\"unresponsive\");\n                }, _this.unresponsiveTimeout);\n                _context2.prev = 6;\n                _context2.next = 9;\n                return f();\n\n              case 9:\n                res = _context2.sent;\n\n                if (unresponsiveReached) {\n                  _this.emit(\"responsive\");\n                }\n\n                return _context2.abrupt(\"return\", res);\n\n              case 12:\n                _context2.prev = 12;\n                clearTimeout(timeout);\n                if (resolveBusy) resolveBusy();\n                _this.exchangeBusyPromise = null;\n                return _context2.finish(12);\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[6,, 12, 17]]);\n      }));\n\n      return function (_x5) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    this._appAPIlock = null;\n  }\n  /**\n   * low level api to communicate with the device\n   * This method is for implementations to implement but should not be directly called.\n   * Instead, the recommanded way is to use send() method\n   * @param apdu the data to send\n   * @return a Promise of response data\n   */\n\n\n  _createClass(Transport, [{\n    key: \"exchange\",\n    value: function exchange(_apdu) {\n      throw new Error(\"exchange not implemented\");\n    }\n    /**\n     * set the \"scramble key\" for the next exchanges with the device.\n     * Each App can have a different scramble key and they internally will set it at instanciation.\n     * @param key the scramble key\n     */\n\n  }, {\n    key: \"setScrambleKey\",\n    value: function setScrambleKey(_key) {}\n    /**\n     * close the exchange with the device.\n     * @return a Promise that ends when the transport is closed.\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      return Promise.resolve();\n    }\n    /**\n     * Listen to an event on an instance of transport.\n     * Transport implementation can have specific events. Here is the common events:\n     * * `\"disconnect\"` : triggered if Transport is disconnected\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(eventName, cb) {\n      this._events.on(eventName, cb);\n    }\n    /**\n     * Stop listening to an event on an instance of transport.\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(eventName, cb) {\n      this._events.removeListener(eventName, cb);\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      var _this$_events;\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key2 = 1; _key2 < _len; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      (_this$_events = this._events).emit.apply(_this$_events, [event].concat(args));\n    }\n    /**\n     * Enable or not logs of the binary exchange\n     */\n\n  }, {\n    key: \"setDebugMode\",\n    value: function setDebugMode() {\n      console.warn(\"setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.\");\n    }\n    /**\n     * Set a timeout (in milliseconds) for the exchange call. Only some transport might implement it. (e.g. U2F)\n     */\n\n  }, {\n    key: \"setExchangeTimeout\",\n    value: function setExchangeTimeout(exchangeTimeout) {\n      this.exchangeTimeout = exchangeTimeout;\n    }\n    /**\n     * Define the delay before emitting \"unresponsive\" on an exchange that does not respond\n     */\n\n  }, {\n    key: \"setExchangeUnresponsiveTimeout\",\n    value: function setExchangeUnresponsiveTimeout(unresponsiveTimeout) {\n      this.unresponsiveTimeout = unresponsiveTimeout;\n    }\n    /**\n     * wrapper on top of exchange to simplify work of the implementation.\n     * @param cla\n     * @param ins\n     * @param p1\n     * @param p2\n     * @param data\n     * @param statusList is a list of accepted status code (shorts). [0x9000] by default\n     * @return a Promise of response buffer\n     */\n\n    /**\n     * create() allows to open the first descriptor available or\n     * throw if there is none or if timeout is reached.\n     * This is a light helper, alternative to using listen() and open() (that you may need for any more advanced usecase)\n     * @example\n    TransportFoo.create().then(transport => ...)\n     */\n\n  }, {\n    key: \"decorateAppAPIMethods\",\n    value: function decorateAppAPIMethods(self, methods, scrambleKey) {\n      var _iterator = _createForOfIteratorHelper(methods),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var methodName = _step.value;\n          self[methodName] = this.decorateAppAPIMethod(methodName, self[methodName], self, scrambleKey);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"decorateAppAPIMethod\",\n    value: function decorateAppAPIMethod(methodName, f, ctx, scrambleKey) {\n      var _this2 = this;\n\n      return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _appAPIlock,\n            _len2,\n            args,\n            _key3,\n            _args3 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _appAPIlock = _this2._appAPIlock;\n\n                if (!_appAPIlock) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", Promise.reject(new TransportError(\"Ledger Device is busy (lock \" + _appAPIlock + \")\", \"TransportLocked\")));\n\n              case 3:\n                _context3.prev = 3;\n                _this2._appAPIlock = methodName;\n\n                _this2.setScrambleKey(scrambleKey);\n\n                for (_len2 = _args3.length, args = new Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n                  args[_key3] = _args3[_key3];\n                }\n\n                _context3.next = 9;\n                return f.apply(ctx, args);\n\n              case 9:\n                return _context3.abrupt(\"return\", _context3.sent);\n\n              case 10:\n                _context3.prev = 10;\n                _this2._appAPIlock = null;\n                return _context3.finish(10);\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[3,, 10, 13]]);\n      }));\n    }\n  }], [{\n    key: \"create\",\n    value: function create() {\n      var _this3 = this;\n\n      var openTimeout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3000;\n      var listenTimeout = arguments.length > 1 ? arguments[1] : undefined;\n      return new Promise(function (resolve, reject) {\n        var found = false;\n\n        var sub = _this3.listen({\n          next: function next(e) {\n            found = true;\n            if (sub) sub.unsubscribe();\n            if (listenTimeoutId) clearTimeout(listenTimeoutId);\n\n            _this3.open(e.descriptor, openTimeout).then(resolve, reject);\n          },\n          error: function error(e) {\n            if (listenTimeoutId) clearTimeout(listenTimeoutId);\n            reject(e);\n          },\n          complete: function complete() {\n            if (listenTimeoutId) clearTimeout(listenTimeoutId);\n\n            if (!found) {\n              reject(new TransportError(_this3.ErrorMessage_NoDeviceFound, \"NoDeviceFound\"));\n            }\n          }\n        });\n\n        var listenTimeoutId = listenTimeout ? setTimeout(function () {\n          sub.unsubscribe();\n          reject(new TransportError(_this3.ErrorMessage_ListenTimeout, \"ListenTimeout\"));\n        }, listenTimeout) : null;\n      });\n    }\n  }]);\n\n  return Transport;\n}();\n\nexport { Transport as default };\nTransport.isSupported = void 0;\nTransport.list = void 0;\nTransport.listen = void 0;\nTransport.open = void 0;\nTransport.ErrorMessage_ListenTimeout = \"No Ledger device found (timeout)\";\nTransport.ErrorMessage_NoDeviceFound = \"No Ledger device found\";","/**\n * A Log object\n */\nvar id = 0;\nvar subscribers = [];\n/**\n * log something\n * @param type a namespaced identifier of the log (it is not a level like \"debug\", \"error\" but more like \"apdu-in\", \"apdu-out\", etc...)\n * @param message a clear message of the log associated to the type\n */\n\nexport var log = function log(type, message, data) {\n  var obj = {\n    type: type,\n    id: String(++id),\n    date: new Date()\n  };\n  if (message) obj.message = message;\n  if (data) obj.data = data;\n  dispatch(obj);\n};\n/**\n * listen to logs.\n * @param cb that is called for each future log() with the Log object\n * @return a function that can be called to unsubscribe the listener\n */\n\nexport var listen = function listen(cb) {\n  subscribers.push(cb);\n  return function () {\n    var i = subscribers.indexOf(cb);\n\n    if (i !== -1) {\n      // equivalent of subscribers.splice(i, 1) // https://twitter.com/Rich_Harris/status/1125850391155965952\n      subscribers[i] = subscribers[subscribers.length - 1];\n      subscribers.pop();\n    }\n  };\n};\n\nfunction dispatch(log) {\n  for (var i = 0; i < subscribers.length; i++) {\n    try {\n      subscribers[i](log);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n} // for debug purpose\n\n\nif (typeof window !== \"undefined\") {\n  window.__ledgerLogsListen = listen;\n}"],"sourceRoot":""}